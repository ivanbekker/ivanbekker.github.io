import svgr from 'svgr';
import path from 'path';
import fs from 'fs';
import Utils from '../src/components/utils/utils';

const argv = {};
const scriptArg = process.argv.slice(2);
scriptArg.forEach((arg) => {
  const split = arg.split('=');
  if (split.length === 2) {
    const key = split[0].replace('--', '');
    argv[key] = split[1];
  }
});

const data = {icon: argv.icon};
const iconPath = '../src/components/Icon/img_source/';
const iconJsPath = '../src/components/Icon/img/';
const svgCode = fs.readFileSync(path.resolve(__dirname, `${iconPath}${data.icon}.svg`), 'utf8');
const componentName = Utils.capitalize(data.icon);
svgr(svgCode, {}, {componentName}).then(jsCode => {
  fs.writeFileSync(path.resolve(__dirname, `${iconJsPath}${componentName}.js`), jsCode, 'utf8');
});
