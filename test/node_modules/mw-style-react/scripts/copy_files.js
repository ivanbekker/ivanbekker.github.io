import fs from 'fs';
import path from 'path';

/**
 * Create build package.json file
 */
function createPackageFile() {
  const packageData = fs.readFileSync(path.resolve(__dirname, '../package.json'), 'utf8');
  const newPackageData = JSON.parse(packageData);
  delete newPackageData.devDependencies;
  delete newPackageData.scripts;
  const buildPath = path.resolve(__dirname, '../build/package.json');

  fs.writeFileSync(buildPath, JSON.stringify(newPackageData, null, 2), 'utf8');
  console.log(`Created package.json in ${buildPath}`);

  return newPackageData;
}

/**
 * Create empty img_source file for build
 */
function createImgSourceFolder() {
  const buildPath = path.resolve(__dirname, '../build/Icon/img_source');
  fs.mkdirSync(buildPath);
  fs.writeFileSync(`${buildPath}/.gitignore`, '', 'utf8');
  console.log(`Created img_source folder in ${buildPath}`);
}

createPackageFile();
createImgSourceFolder();
