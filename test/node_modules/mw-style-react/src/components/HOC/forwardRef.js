import React from 'react';
import PropTypes from 'prop-types';

export default function forwardRef(Component) {
  class ForwardRef extends React.Component {
    render() {
      const {forwardRef, ...rest} = this.props;
      return <Component forwardRef={forwardRef} {...rest} />;
    }
  }

  ForwardRef.propTypes = {
    forwardRef: PropTypes.object
  };

  const forwardRefFunc = (props, ref) => (
    <ForwardRef {...props} forwardRef={ref}/>
  );

  const name = Component.displayName || Component.name;
  forwardRef.displayName = `ForwardRef(${name})`;

  return React.forwardRef(forwardRefFunc);
}
