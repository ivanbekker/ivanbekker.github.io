{"map":"{\"version\":3,\"sources\":[\"/Users/ivanbekker/Projects/corezoid_site/node_modules/core-js/modules/es6.string.starts-with.js\",\"/Users/ivanbekker/Projects/corezoid_site/node_modules/babel-loader/lib/index.js??ref--11-0!/Users/ivanbekker/Projects/corezoid_site/node_modules/@firebase/installations/dist/index.esm.js\",\"/Users/ivanbekker/Projects/corezoid_site/node_modules/babel-loader/lib/index.js??ref--11-0!/Users/ivanbekker/Projects/corezoid_site/node_modules/@firebase/messaging/dist/index.esm.js\",\"/Users/ivanbekker/Projects/corezoid_site/node_modules/babel-loader/lib/index.js??ref--11-0!/Users/ivanbekker/Projects/corezoid_site/node_modules/idb/build/idb.js\"],\"names\":[\"$export\",\"__webpack_require__\",\"toLength\",\"context\",\"$startsWith\",\"P\",\"F\",\"startsWith\",\"searchString\",\"that\",\"this\",\"index\",\"Math\",\"min\",\"arguments\",\"length\",\"undefined\",\"search\",\"String\",\"call\",\"slice\",\"index_esm_a\",\"index_esm_name\",\"version\",\"PENDING_TIMEOUT_MS\",\"PACKAGE_VERSION\",\"INTERNAL_AUTH_VERSION\",\"INSTALLATIONS_API_URL\",\"TOKEN_EXPIRATION_BUFFER\",\"ERROR_DESCRIPTION_MAP\",\"ERROR_FACTORY\",\"util_dist_index_cjs\",\"isServerError\",\"error\",\"code\",\"includes\",\"getInstallationsEndpoint\",\"_a\",\"projectId\",\"extractAuthTokenInfoFromResponse\",\"response\",\"token\",\"requestStatus\",\"expiresIn\",\"responseExpiresIn\",\"Number\",\"replace\",\"creationTime\",\"Date\",\"now\",\"getErrorFromResponse\",\"requestName\",\"Object\",\"tslib_es6\",\"responseJson\",\"errorData\",\"label\",\"json\",\"sent\",\"create\",\"serverCode\",\"serverMessage\",\"message\",\"serverStatus\",\"status\",\"getHeaders\",\"apiKey\",\"Headers\",\"Content-Type\",\"Accept\",\"x-goog-api-key\",\"getHeadersWithAuth\",\"appConfig\",\"refreshToken\",\"headers\",\"append\",\"getAuthorizationHeader\",\"retryIfServerError\",\"fn\",\"result\",\"createInstallationRequest\",\"fid\",\"endpoint\",\"body\",\"request\",\"responseValue\",\"_b\",\"authVersion\",\"appId\",\"sdkVersion\",\"method\",\"JSON\",\"stringify\",\"fetch\",\"ok\",\"registrationStatus\",\"authToken\",\"sleep\",\"ms\",\"Promise\",\"resolve\",\"setTimeout\",\"VALID_FID_PATTERN\",\"INVALID_FID\",\"generateFid\",\"fidByteArray\",\"Uint8Array\",\"self\",\"crypto\",\"msCrypto\",\"getRandomValues\",\"array\",\"btoa\",\"fromCharCode\",\"apply\",\"substr\",\"encode\",\"test\",\"getKey\",\"appName\",\"fidChangeCallbacks\",\"Map\",\"fidChanged\",\"key\",\"callFidChangeCallbacks\",\"channel\",\"getBroadcastChannel\",\"postMessage\",\"closeBroadcastChannel\",\"broadcastFidChange\",\"e_1\",\"callbacks\",\"get\",\"callbacks_1\",\"callbacks_1_1\",\"next\",\"done\",\"callback\",\"value\",\"e_1_1\",\"broadcastChannel\",\"BroadcastChannel\",\"onmessage\",\"e\",\"data\",\"size\",\"close\",\"instance\",\"dist_index_esm_a\",\"DATABASE_NAME\",\"DATABASE_VERSION\",\"OBJECT_STORE_NAME\",\"dbPromise\",\"getDbPromise\",\"idb\",\"upgradeDB\",\"oldVersion\",\"createObjectStore\",\"set\",\"db\",\"tx\",\"objectStore\",\"oldValue\",\"transaction\",\"put\",\"complete\",\"remove\",\"update\",\"updateFn\",\"store\",\"newValue\",\"getInstallationEntry\",\"registrationPromise\",\"installationEntry\",\"oldEntry\",\"clearTimedOutRequest\",\"updateOrCreateInstallationEntry\",\"entryWithPromise\",\"navigator\",\"onLine\",\"registrationPromiseWithError\",\"reject\",\"inProgressEntry\",\"registrationTime\",\"registeredInstallationEntry\",\"trys\",\"push\",\"registerInstallation\",\"waitUntilFidRegistration\",\"triggerRegistrationIfNecessary\",\"entry\",\"updateInstallationRequest\",\"generateAuthTokenRequest\",\"platformLoggerProvider\",\"platformLogger\",\"getGenerateAuthTokenEndpoint\",\"getImmediate\",\"optional\",\"getPlatformInfoString\",\"installation\",\"refreshAuthToken\",\"dependencies\",\"forceRefresh\",\"tokenPromise\",\"isEntryRegistered\",\"oldAuthToken\",\"isAuthTokenExpired\",\"updateAuthTokenRequest\",\"waitUntilAuthTokenRequest\",\"inProgressAuthToken\",\"requestTime\",\"makeAuthTokenRequestInProgressEntry\",\"updatedInstallationEntry\",\"fetchAuthTokenFromServer\",\"completeInstallationRegistration\",\"deleteInstallationRequest\",\"getDeleteEndpoint\",\"_onIdChange\",\"callbackSet\",\"Set\",\"add\",\"addCallback\",\"removeCallback\",\"getMissingValueError\",\"valueName\",\"index_cjs_default\",\"a\",\"INTERNAL\",\"registerComponent\",\"dist_index_cjs\",\"container\",\"app\",\"getProvider\",\"options\",\"name\",\"configKeys_1\",\"configKeys_1_1\",\"keyName\",\"extractAppConfig\",\"getId\",\"console\",\"_getId\",\"getToken\",\"_getToken\",\"delete\",\"deleteInstallation\",\"onIdChange\",\"registerVersion\",\"ERROR_MAP\",\"index_esm_ERROR_FACTORY\",\"index_esm_getMissingValueError\",\"arrayToBase64\",\"uint8Array\",\"OLD_DB_NAME\",\"OLD_DB_VERSION\",\"OLD_OBJECT_STORE_NAME\",\"migrateOldDatabase\",\"senderId\",\"databases\",\"tokenDetails\",\"_this\",\"indexedDB\",\"map\",\"oldDetails\",\"objectStoreNames\",\"contains\",\"clear\",\"auth\",\"p256dh\",\"fcmToken\",\"createTime\",\"subscriptionOptions\",\"swScope\",\"vapidKey\",\"checkTokenDetails\",\"index_esm_DATABASE_NAME\",\"index_esm_DATABASE_VERSION\",\"index_esm_OBJECT_STORE_NAME\",\"index_esm_dbPromise\",\"index_esm_getDbPromise\",\"upgradeDb\",\"dbGet\",\"firebaseDependencies\",\"oldTokenDetails\",\"index_esm_getKey\",\"dbSet\",\"dbRemove\",\"DEFAULT_VAPID_KEY\",\"ENDPOINT\",\"FCM_MSG\",\"CONSOLE_CAMPAIGN_ID\",\"requestGetToken\",\"subscribeOptions\",\"responseData\",\"err_1\",\"index_esm_getHeaders\",\"getBody\",\"getEndpoint\",\"errorInfo\",\"requestUpdateToken\",\"updateOptions\",\"err_2\",\"requestDeleteToken\",\"unsubscribeOptions\",\"err_3\",\"installations\",\"x-goog-firebase-installations-auth\",\"web\",\"applicationPubKey\",\"MessageType\",\"TOKEN_EXPIRATION_MS\",\"swRegistration\",\"pushSubscription\",\"Notification\",\"permission\",\"getPushSubscription\",\"scope\",\"getNewToken\",\"dbOptions\",\"isVapidKeyEqual\",\"currentOptions\",\"isEndpointEqual\",\"isAuthEqual\",\"isP256dhEqual\",\"warn\",\"updateToken\",\"deleteToken\",\"pushManager\",\"getSubscription\",\"unsubscribe\",\"updatedToken\",\"updatedTokenDetails\",\"e_2\",\"subscription\",\"subscribe\",\"userVisibleOnly\",\"applicationServerKey\",\"isConsoleMessage\",\"index_esm_WindowController\",\"WindowController\",\"onMessageCallback\",\"serviceWorker\",\"addEventListener\",\"messageEventListener\",\"defineProperty\",\"prototype\",\"enumerable\",\"configurable\",\"getServiceWorkerRegistration\",\"requestPermission\",\"permissionResult\",\"usePublicVapidKey\",\"useServiceWorker\",\"ServiceWorkerRegistration\",\"onMessage\",\"nextOrObserver\",\"setBackgroundMessageHandler\",\"onTokenRefresh\",\"register\",\"browserErrorMessage\",\"event\",\"type\",\"payload\",\"_c\",\"firebaseMessaging\",\"PUSH_RECEIVED\",\"logEvent\",\"messageType\",\"eventType\",\"NOTIFICATION_CLICKED\",\"Error\",\"getEventType\",\"analyticsProvider\",\"message_id\",\"message_name\",\"message_time\",\"message_device_time\",\"floor\",\"index_esm_SwController\",\"SwController\",\"bgMessageHandler\",\"waitUntil\",\"onPush\",\"onSubChange\",\"onNotificationClick\",\"registration\",\"clientList\",\"notificationDetails\",\"err\",\"getMessagePayload\",\"getClientList\",\"some\",\"client\",\"visibilityState\",\"url\",\"hasVisibleClients\",\"sendMessageToWindowClients\",\"notification\",\"notificationInformation\",\"getNotificationData\",\"showNotification\",\"newSubscription\",\"link\",\"action\",\"stopImmediatePropagation\",\"fcmOptions\",\"click_action\",\"location\",\"origin\",\"getLink\",\"getWindowClient\",\"clients\",\"openWindow\",\"focus\",\"createNewMessage\",\"parsedURL\",\"clientList_1\",\"clientList_1_1\",\"URL\",\"href\",\"clientList_2\",\"clientList_2_1\",\"e_2_1\",\"matchAll\",\"includeUncontrolled\",\"details\",\"title\",\"actions\",\"maxActions\",\"NAMESPACE_EXPORTS\",\"isSupported\",\"hasOwnProperty\",\"PushSubscription\",\"window\",\"cookieEnabled\",\"messagingSenderId\",\"index_esm_extractAppConfig\",\"setServiceProps\",\"exports\",\"promisifyRequest\",\"onsuccess\",\"onerror\",\"promisifyRequestCall\",\"obj\",\"args\",\"p\",\"then\",\"proxyProperties\",\"ProxyClass\",\"targetProp\",\"properties\",\"forEach\",\"prop\",\"val\",\"proxyRequestMethods\",\"Constructor\",\"proxyMethods\",\"proxyCursorRequestMethods\",\"Cursor\",\"Index\",\"_index\",\"cursor\",\"_cursor\",\"_request\",\"ObjectStore\",\"_store\",\"Transaction\",\"idbTransaction\",\"_tx\",\"oncomplete\",\"onabort\",\"UpgradeDB\",\"_db\",\"DB\",\"IDBIndex\",\"IDBCursor\",\"methodName\",\"createIndex\",\"IDBObjectStore\",\"IDBTransaction\",\"IDBDatabase\",\"funcName\",\"arr\",\"Array\",\"nativeObject\",\"getAll\",\"query\",\"count\",\"items\",\"iterateCursor\",\"openDb\",\"upgradeCallback\",\"onupgradeneeded\",\"deleteDb\",\"factory\"],\"mappings\":\"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\",\"sourcesContent\":[\"// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\\n'use strict';\\nvar $export = require('./_export');\\nvar toLength = require('./_to-length');\\nvar context = require('./_string-context');\\nvar STARTS_WITH = 'startsWith';\\nvar $startsWith = ''[STARTS_WITH];\\n\\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\\n  startsWith: function startsWith(searchString /* , position = 0 */) {\\n    var that = context(this, searchString, STARTS_WITH);\\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\\n    var search = String(searchString);\\n    return $startsWith\\n      ? $startsWith.call(that, search, index)\\n      : that.slice(index, index + search.length) === search;\\n  }\\n});\\n\",\"import \\\"core-js/modules/es6.function.name\\\";\\nimport \\\"core-js/modules/es6.set\\\";\\nimport \\\"core-js/modules/web.dom.iterable\\\";\\nimport \\\"core-js/modules/es6.array.iterator\\\";\\nimport \\\"core-js/modules/es6.string.iterator\\\";\\nimport \\\"core-js/modules/es6.map\\\";\\nimport \\\"core-js/modules/es6.typed.uint8-array\\\";\\nimport \\\"core-js/modules/es6.promise\\\";\\nimport \\\"core-js/modules/es6.object.to-string\\\";\\nimport \\\"core-js/modules/es6.regexp.replace\\\";\\nimport \\\"core-js/modules/es6.number.constructor\\\";\\nimport \\\"core-js/modules/es6.date.now\\\";\\nimport \\\"core-js/modules/es7.array.includes\\\";\\nimport \\\"core-js/modules/es6.string.includes\\\";\\nimport firebase from '@firebase/app';\\nimport { Component } from '@firebase/component';\\nimport { __awaiter, __generator, __spread, __values, __assign } from 'tslib';\\nimport { ErrorFactory, FirebaseError } from '@firebase/util';\\nimport { openDb } from 'idb';\\nvar name = \\\"@firebase/installations\\\";\\nvar version = \\\"0.4.6\\\";\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\nvar PENDING_TIMEOUT_MS = 10000;\\nvar PACKAGE_VERSION = \\\"w:\\\" + version;\\nvar INTERNAL_AUTH_VERSION = 'FIS_v2';\\nvar INSTALLATIONS_API_URL = 'https://firebaseinstallations.googleapis.com/v1';\\nvar TOKEN_EXPIRATION_BUFFER = 60 * 60 * 1000; // One hour\\n\\nvar SERVICE = 'installations';\\nvar SERVICE_NAME = 'Installations';\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\nvar _a;\\n\\nvar ERROR_DESCRIPTION_MAP = (_a = {}, _a[\\\"missing-app-config-values\\\"\\n/* MISSING_APP_CONFIG_VALUES */\\n] = 'Missing App configuration value: \\\"{$valueName}\\\"', _a[\\\"not-registered\\\"\\n/* NOT_REGISTERED */\\n] = 'Firebase Installation is not registered.', _a[\\\"installation-not-found\\\"\\n/* INSTALLATION_NOT_FOUND */\\n] = 'Firebase Installation not found.', _a[\\\"request-failed\\\"\\n/* REQUEST_FAILED */\\n] = '{$requestName} request failed with error \\\"{$serverCode} {$serverStatus}: {$serverMessage}\\\"', _a[\\\"app-offline\\\"\\n/* APP_OFFLINE */\\n] = 'Could not process request. Application offline.', _a[\\\"delete-pending-registration\\\"\\n/* DELETE_PENDING_REGISTRATION */\\n] = \\\"Can't delete installation while there is a pending registration request.\\\", _a);\\nvar ERROR_FACTORY = new ErrorFactory(SERVICE, SERVICE_NAME, ERROR_DESCRIPTION_MAP);\\n/** Returns true if error is a FirebaseError that is based on an error from the server. */\\n\\nfunction isServerError(error) {\\n  return error instanceof FirebaseError && error.code.includes(\\\"request-failed\\\"\\n  /* REQUEST_FAILED */\\n  );\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction getInstallationsEndpoint(_a) {\\n  var projectId = _a.projectId;\\n  return INSTALLATIONS_API_URL + \\\"/projects/\\\" + projectId + \\\"/installations\\\";\\n}\\n\\nfunction extractAuthTokenInfoFromResponse(response) {\\n  return {\\n    token: response.token,\\n    requestStatus: 2\\n    /* COMPLETED */\\n    ,\\n    expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\\n    creationTime: Date.now()\\n  };\\n}\\n\\nfunction getErrorFromResponse(requestName, response) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var responseJson, errorData;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , response.json()];\\n\\n        case 1:\\n          responseJson = _a.sent();\\n          errorData = responseJson.error;\\n          return [2\\n          /*return*/\\n          , ERROR_FACTORY.create(\\\"request-failed\\\"\\n          /* REQUEST_FAILED */\\n          , {\\n            requestName: requestName,\\n            serverCode: errorData.code,\\n            serverMessage: errorData.message,\\n            serverStatus: errorData.status\\n          })];\\n      }\\n    });\\n  });\\n}\\n\\nfunction getHeaders(_a) {\\n  var apiKey = _a.apiKey;\\n  return new Headers({\\n    'Content-Type': 'application/json',\\n    Accept: 'application/json',\\n    'x-goog-api-key': apiKey\\n  });\\n}\\n\\nfunction getHeadersWithAuth(appConfig, _a) {\\n  var refreshToken = _a.refreshToken;\\n  var headers = getHeaders(appConfig);\\n  headers.append('Authorization', getAuthorizationHeader(refreshToken));\\n  return headers;\\n}\\n/**\\r\\n * Calls the passed in fetch wrapper and returns the response.\\r\\n * If the returned response has a status of 5xx, re-runs the function once and\\r\\n * returns the response.\\r\\n */\\n\\n\\nfunction retryIfServerError(fn) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var result;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , fn()];\\n\\n        case 1:\\n          result = _a.sent();\\n\\n          if (result.status >= 500 && result.status < 600) {\\n            // Internal Server Error. Retry request.\\n            return [2\\n            /*return*/\\n            , fn()];\\n          }\\n\\n          return [2\\n          /*return*/\\n          , result];\\n      }\\n    });\\n  });\\n}\\n\\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn) {\\n  // This works because the server will never respond with fractions of a second.\\n  return Number(responseExpiresIn.replace('s', '000'));\\n}\\n\\nfunction getAuthorizationHeader(refreshToken) {\\n  return INTERNAL_AUTH_VERSION + \\\" \\\" + refreshToken;\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction createInstallationRequest(appConfig, _a) {\\n  var fid = _a.fid;\\n  return __awaiter(this, void 0, void 0, function () {\\n    var endpoint, headers, body, request, response, responseValue, registeredInstallationEntry;\\n    return __generator(this, function (_b) {\\n      switch (_b.label) {\\n        case 0:\\n          endpoint = getInstallationsEndpoint(appConfig);\\n          headers = getHeaders(appConfig);\\n          body = {\\n            fid: fid,\\n            authVersion: INTERNAL_AUTH_VERSION,\\n            appId: appConfig.appId,\\n            sdkVersion: PACKAGE_VERSION\\n          };\\n          request = {\\n            method: 'POST',\\n            headers: headers,\\n            body: JSON.stringify(body)\\n          };\\n          return [4\\n          /*yield*/\\n          , retryIfServerError(function () {\\n            return fetch(endpoint, request);\\n          })];\\n\\n        case 1:\\n          response = _b.sent();\\n          if (!response.ok) return [3\\n          /*break*/\\n          , 3];\\n          return [4\\n          /*yield*/\\n          , response.json()];\\n\\n        case 2:\\n          responseValue = _b.sent();\\n          registeredInstallationEntry = {\\n            fid: responseValue.fid || fid,\\n            registrationStatus: 2\\n            /* COMPLETED */\\n            ,\\n            refreshToken: responseValue.refreshToken,\\n            authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\\n          };\\n          return [2\\n          /*return*/\\n          , registeredInstallationEntry];\\n\\n        case 3:\\n          return [4\\n          /*yield*/\\n          , getErrorFromResponse('Create Installation', response)];\\n\\n        case 4:\\n          throw _b.sent();\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n/** Returns a promise that resolves after given time passes. */\\n\\n\\nfunction sleep(ms) {\\n  return new Promise(function (resolve) {\\n    setTimeout(resolve, ms);\\n  });\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction bufferToBase64UrlSafe(array) {\\n  var b64 = btoa(String.fromCharCode.apply(String, __spread(array)));\\n  return b64.replace(/\\\\+/g, '-').replace(/\\\\//g, '_');\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nvar VALID_FID_PATTERN = /^[cdef][\\\\w-]{21}$/;\\nvar INVALID_FID = '';\\n/**\\r\\n * Generates a new FID using random values from Web Crypto API.\\r\\n * Returns an empty string if FID generation fails for any reason.\\r\\n */\\n\\nfunction generateFid() {\\n  try {\\n    // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\\n    // bytes. our implementation generates a 17 byte array instead.\\n    var fidByteArray = new Uint8Array(17);\\n    var crypto_1 = self.crypto || self.msCrypto;\\n    crypto_1.getRandomValues(fidByteArray); // Replace the first 4 random bits with the constant FID header of 0b0111.\\n\\n    fidByteArray[0] = 112 + fidByteArray[0] % 16;\\n    var fid = encode(fidByteArray);\\n    return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\\n  } catch (_a) {\\n    // FID generation errored\\n    return INVALID_FID;\\n  }\\n}\\n/** Converts a FID Uint8Array to a base64 string representation. */\\n\\n\\nfunction encode(fidByteArray) {\\n  var b64String = bufferToBase64UrlSafe(fidByteArray); // Remove the 23rd character that was added because of the extra 4 bits at the\\n  // end of our 17 byte array, and the '=' padding.\\n\\n  return b64String.substr(0, 22);\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n/** Returns a string key that can be used to identify the app. */\\n\\n\\nfunction getKey(appConfig) {\\n  return appConfig.appName + \\\"!\\\" + appConfig.appId;\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nvar fidChangeCallbacks = new Map();\\n/**\\r\\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\\r\\n * change to other tabs.\\r\\n */\\n\\nfunction fidChanged(appConfig, fid) {\\n  var key = getKey(appConfig);\\n  callFidChangeCallbacks(key, fid);\\n  broadcastFidChange(key, fid);\\n}\\n\\nfunction addCallback(appConfig, callback) {\\n  // Open the broadcast channel if it's not already open,\\n  // to be able to listen to change events from other tabs.\\n  getBroadcastChannel();\\n  var key = getKey(appConfig);\\n  var callbackSet = fidChangeCallbacks.get(key);\\n\\n  if (!callbackSet) {\\n    callbackSet = new Set();\\n    fidChangeCallbacks.set(key, callbackSet);\\n  }\\n\\n  callbackSet.add(callback);\\n}\\n\\nfunction removeCallback(appConfig, callback) {\\n  var key = getKey(appConfig);\\n  var callbackSet = fidChangeCallbacks.get(key);\\n\\n  if (!callbackSet) {\\n    return;\\n  }\\n\\n  callbackSet[\\\"delete\\\"](callback);\\n\\n  if (callbackSet.size === 0) {\\n    fidChangeCallbacks[\\\"delete\\\"](key);\\n  } // Close broadcast channel if there are no more callbacks.\\n\\n\\n  closeBroadcastChannel();\\n}\\n\\nfunction callFidChangeCallbacks(key, fid) {\\n  var e_1, _a;\\n\\n  var callbacks = fidChangeCallbacks.get(key);\\n\\n  if (!callbacks) {\\n    return;\\n  }\\n\\n  try {\\n    for (var callbacks_1 = __values(callbacks), callbacks_1_1 = callbacks_1.next(); !callbacks_1_1.done; callbacks_1_1 = callbacks_1.next()) {\\n      var callback = callbacks_1_1.value;\\n      callback(fid);\\n    }\\n  } catch (e_1_1) {\\n    e_1 = {\\n      error: e_1_1\\n    };\\n  } finally {\\n    try {\\n      if (callbacks_1_1 && !callbacks_1_1.done && (_a = callbacks_1[\\\"return\\\"])) _a.call(callbacks_1);\\n    } finally {\\n      if (e_1) throw e_1.error;\\n    }\\n  }\\n}\\n\\nfunction broadcastFidChange(key, fid) {\\n  var channel = getBroadcastChannel();\\n\\n  if (channel) {\\n    channel.postMessage({\\n      key: key,\\n      fid: fid\\n    });\\n  }\\n\\n  closeBroadcastChannel();\\n}\\n\\nvar broadcastChannel = null;\\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\\n\\nfunction getBroadcastChannel() {\\n  if (!broadcastChannel && 'BroadcastChannel' in self) {\\n    broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\\n\\n    broadcastChannel.onmessage = function (e) {\\n      callFidChangeCallbacks(e.data.key, e.data.fid);\\n    };\\n  }\\n\\n  return broadcastChannel;\\n}\\n\\nfunction closeBroadcastChannel() {\\n  if (fidChangeCallbacks.size === 0 && broadcastChannel) {\\n    broadcastChannel.close();\\n    broadcastChannel = null;\\n  }\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nvar DATABASE_NAME = 'firebase-installations-database';\\nvar DATABASE_VERSION = 1;\\nvar OBJECT_STORE_NAME = 'firebase-installations-store';\\nvar dbPromise = null;\\n\\nfunction getDbPromise() {\\n  if (!dbPromise) {\\n    dbPromise = openDb(DATABASE_NAME, DATABASE_VERSION, function (upgradeDB) {\\n      // We don't use 'break' in this switch statement, the fall-through\\n      // behavior is what we want, because if there are multiple versions between\\n      // the old version and the current version, we want ALL the migrations\\n      // that correspond to those versions to run, not only the last one.\\n      // eslint-disable-next-line default-case\\n      switch (upgradeDB.oldVersion) {\\n        case 0:\\n          upgradeDB.createObjectStore(OBJECT_STORE_NAME);\\n      }\\n    });\\n  }\\n\\n  return dbPromise;\\n}\\n/** Assigns or overwrites the record for the given key with the given value. */\\n\\n\\nfunction set(appConfig, value) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var key, db, tx, objectStore, oldValue;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          key = getKey(appConfig);\\n          return [4\\n          /*yield*/\\n          , getDbPromise()];\\n\\n        case 1:\\n          db = _a.sent();\\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\\n          objectStore = tx.objectStore(OBJECT_STORE_NAME);\\n          return [4\\n          /*yield*/\\n          , objectStore.get(key)];\\n\\n        case 2:\\n          oldValue = _a.sent();\\n          return [4\\n          /*yield*/\\n          , objectStore.put(value, key)];\\n\\n        case 3:\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , tx.complete];\\n\\n        case 4:\\n          _a.sent();\\n\\n          if (!oldValue || oldValue.fid !== value.fid) {\\n            fidChanged(appConfig, value.fid);\\n          }\\n\\n          return [2\\n          /*return*/\\n          , value];\\n      }\\n    });\\n  });\\n}\\n/** Removes record(s) from the objectStore that match the given key. */\\n\\n\\nfunction remove(appConfig) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var key, db, tx;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          key = getKey(appConfig);\\n          return [4\\n          /*yield*/\\n          , getDbPromise()];\\n\\n        case 1:\\n          db = _a.sent();\\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\\n          return [4\\n          /*yield*/\\n          , tx.objectStore(OBJECT_STORE_NAME)[\\\"delete\\\"](key)];\\n\\n        case 2:\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , tx.complete];\\n\\n        case 3:\\n          _a.sent();\\n\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * Atomically updates a record with the result of updateFn, which gets\\r\\n * called with the current value. If newValue is undefined, the record is\\r\\n * deleted instead.\\r\\n * @return Updated value\\r\\n */\\n\\n\\nfunction update(appConfig, updateFn) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var key, db, tx, store, oldValue, newValue;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          key = getKey(appConfig);\\n          return [4\\n          /*yield*/\\n          , getDbPromise()];\\n\\n        case 1:\\n          db = _a.sent();\\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\\n          store = tx.objectStore(OBJECT_STORE_NAME);\\n          return [4\\n          /*yield*/\\n          , store.get(key)];\\n\\n        case 2:\\n          oldValue = _a.sent();\\n          newValue = updateFn(oldValue);\\n          if (!(newValue === undefined)) return [3\\n          /*break*/\\n          , 4];\\n          return [4\\n          /*yield*/\\n          , store[\\\"delete\\\"](key)];\\n\\n        case 3:\\n          _a.sent();\\n\\n          return [3\\n          /*break*/\\n          , 6];\\n\\n        case 4:\\n          return [4\\n          /*yield*/\\n          , store.put(newValue, key)];\\n\\n        case 5:\\n          _a.sent();\\n\\n          _a.label = 6;\\n\\n        case 6:\\n          return [4\\n          /*yield*/\\n          , tx.complete];\\n\\n        case 7:\\n          _a.sent();\\n\\n          if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\\n            fidChanged(appConfig, newValue.fid);\\n          }\\n\\n          return [2\\n          /*return*/\\n          , newValue];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n/**\\r\\n * Updates and returns the InstallationEntry from the database.\\r\\n * Also triggers a registration request if it is necessary and possible.\\r\\n */\\n\\n\\nfunction getInstallationEntry(appConfig) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var registrationPromise, installationEntry, _a;\\n\\n    return __generator(this, function (_b) {\\n      switch (_b.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , update(appConfig, function (oldEntry) {\\n            var installationEntry = updateOrCreateInstallationEntry(oldEntry);\\n            var entryWithPromise = triggerRegistrationIfNecessary(appConfig, installationEntry);\\n            registrationPromise = entryWithPromise.registrationPromise;\\n            return entryWithPromise.installationEntry;\\n          })];\\n\\n        case 1:\\n          installationEntry = _b.sent();\\n          if (!(installationEntry.fid === INVALID_FID)) return [3\\n          /*break*/\\n          , 3];\\n          _a = {};\\n          return [4\\n          /*yield*/\\n          , registrationPromise];\\n\\n        case 2:\\n          // FID generation failed. Waiting for the FID from the server.\\n          return [2\\n          /*return*/\\n          , (_a.installationEntry = _b.sent(), _a)];\\n\\n        case 3:\\n          return [2\\n          /*return*/\\n          , {\\n            installationEntry: installationEntry,\\n            registrationPromise: registrationPromise\\n          }];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * Creates a new Installation Entry if one does not exist.\\r\\n * Also clears timed out pending requests.\\r\\n */\\n\\n\\nfunction updateOrCreateInstallationEntry(oldEntry) {\\n  var entry = oldEntry || {\\n    fid: generateFid(),\\n    registrationStatus: 0\\n    /* NOT_STARTED */\\n\\n  };\\n  return clearTimedOutRequest(entry);\\n}\\n/**\\r\\n * If the Firebase Installation is not registered yet, this will trigger the\\r\\n * registration and return an InProgressInstallationEntry.\\r\\n *\\r\\n * If registrationPromise does not exist, the installationEntry is guaranteed\\r\\n * to be registered.\\r\\n */\\n\\n\\nfunction triggerRegistrationIfNecessary(appConfig, installationEntry) {\\n  if (installationEntry.registrationStatus === 0\\n  /* NOT_STARTED */\\n  ) {\\n      if (!navigator.onLine) {\\n        // Registration required but app is offline.\\n        var registrationPromiseWithError = Promise.reject(ERROR_FACTORY.create(\\\"app-offline\\\"\\n        /* APP_OFFLINE */\\n        ));\\n        return {\\n          installationEntry: installationEntry,\\n          registrationPromise: registrationPromiseWithError\\n        };\\n      } // Try registering. Change status to IN_PROGRESS.\\n\\n\\n      var inProgressEntry = {\\n        fid: installationEntry.fid,\\n        registrationStatus: 1\\n        /* IN_PROGRESS */\\n        ,\\n        registrationTime: Date.now()\\n      };\\n      var registrationPromise = registerInstallation(appConfig, inProgressEntry);\\n      return {\\n        installationEntry: inProgressEntry,\\n        registrationPromise: registrationPromise\\n      };\\n    } else if (installationEntry.registrationStatus === 1\\n  /* IN_PROGRESS */\\n  ) {\\n      return {\\n        installationEntry: installationEntry,\\n        registrationPromise: waitUntilFidRegistration(appConfig)\\n      };\\n    } else {\\n    return {\\n      installationEntry: installationEntry\\n    };\\n  }\\n}\\n/** This will be executed only once for each new Firebase Installation. */\\n\\n\\nfunction registerInstallation(appConfig, installationEntry) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var registeredInstallationEntry, e_1;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          _a.trys.push([0, 2,, 7]);\\n\\n          return [4\\n          /*yield*/\\n          , createInstallationRequest(appConfig, installationEntry)];\\n\\n        case 1:\\n          registeredInstallationEntry = _a.sent();\\n          return [2\\n          /*return*/\\n          , set(appConfig, registeredInstallationEntry)];\\n\\n        case 2:\\n          e_1 = _a.sent();\\n          if (!(isServerError(e_1) && e_1.serverCode === 409)) return [3\\n          /*break*/\\n          , 4]; // Server returned a \\\"FID can not be used\\\" error.\\n          // Generate a new ID next time.\\n\\n          return [4\\n          /*yield*/\\n          , remove(appConfig)];\\n\\n        case 3:\\n          // Server returned a \\\"FID can not be used\\\" error.\\n          // Generate a new ID next time.\\n          _a.sent();\\n\\n          return [3\\n          /*break*/\\n          , 6];\\n\\n        case 4:\\n          // Registration failed. Set FID as not registered.\\n          return [4\\n          /*yield*/\\n          , set(appConfig, {\\n            fid: installationEntry.fid,\\n            registrationStatus: 0\\n            /* NOT_STARTED */\\n\\n          })];\\n\\n        case 5:\\n          // Registration failed. Set FID as not registered.\\n          _a.sent();\\n\\n          _a.label = 6;\\n\\n        case 6:\\n          throw e_1;\\n\\n        case 7:\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n/** Call if FID registration is pending in another request. */\\n\\n\\nfunction waitUntilFidRegistration(appConfig) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var entry, _a, installationEntry, registrationPromise;\\n\\n    return __generator(this, function (_b) {\\n      switch (_b.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , updateInstallationRequest(appConfig)];\\n\\n        case 1:\\n          entry = _b.sent();\\n          _b.label = 2;\\n\\n        case 2:\\n          if (!(entry.registrationStatus === 1\\n          /* IN_PROGRESS */\\n          )) return [3\\n            /*break*/\\n            , 5]; // createInstallation request still in progress.\\n\\n          return [4\\n          /*yield*/\\n          , sleep(100)];\\n\\n        case 3:\\n          // createInstallation request still in progress.\\n          _b.sent();\\n\\n          return [4\\n          /*yield*/\\n          , updateInstallationRequest(appConfig)];\\n\\n        case 4:\\n          entry = _b.sent();\\n          return [3\\n          /*break*/\\n          , 2];\\n\\n        case 5:\\n          if (!(entry.registrationStatus === 0\\n          /* NOT_STARTED */\\n          )) return [3\\n            /*break*/\\n            , 7];\\n          return [4\\n          /*yield*/\\n          , getInstallationEntry(appConfig)];\\n\\n        case 6:\\n          _a = _b.sent(), installationEntry = _a.installationEntry, registrationPromise = _a.registrationPromise;\\n\\n          if (registrationPromise) {\\n            return [2\\n            /*return*/\\n            , registrationPromise];\\n          } else {\\n            // if there is no registrationPromise, entry is registered.\\n            return [2\\n            /*return*/\\n            , installationEntry];\\n          }\\n\\n        case 7:\\n          return [2\\n          /*return*/\\n          , entry];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * Called only if there is a CreateInstallation request in progress.\\r\\n *\\r\\n * Updates the InstallationEntry in the DB based on the status of the\\r\\n * CreateInstallation request.\\r\\n *\\r\\n * Returns the updated InstallationEntry.\\r\\n */\\n\\n\\nfunction updateInstallationRequest(appConfig) {\\n  return update(appConfig, function (oldEntry) {\\n    if (!oldEntry) {\\n      throw ERROR_FACTORY.create(\\\"installation-not-found\\\"\\n      /* INSTALLATION_NOT_FOUND */\\n      );\\n    }\\n\\n    return clearTimedOutRequest(oldEntry);\\n  });\\n}\\n\\nfunction clearTimedOutRequest(entry) {\\n  if (hasInstallationRequestTimedOut(entry)) {\\n    return {\\n      fid: entry.fid,\\n      registrationStatus: 0\\n      /* NOT_STARTED */\\n\\n    };\\n  }\\n\\n  return entry;\\n}\\n\\nfunction hasInstallationRequestTimedOut(installationEntry) {\\n  return installationEntry.registrationStatus === 1\\n  /* IN_PROGRESS */\\n  && installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now();\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction generateAuthTokenRequest(_a, installationEntry) {\\n  var appConfig = _a.appConfig,\\n      platformLoggerProvider = _a.platformLoggerProvider;\\n  return __awaiter(this, void 0, void 0, function () {\\n    var endpoint, headers, platformLogger, body, request, response, responseValue, completedAuthToken;\\n    return __generator(this, function (_b) {\\n      switch (_b.label) {\\n        case 0:\\n          endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\\n          headers = getHeadersWithAuth(appConfig, installationEntry);\\n          platformLogger = platformLoggerProvider.getImmediate({\\n            optional: true\\n          });\\n\\n          if (platformLogger) {\\n            headers.append('x-firebase-client', platformLogger.getPlatformInfoString());\\n          }\\n\\n          body = {\\n            installation: {\\n              sdkVersion: PACKAGE_VERSION\\n            }\\n          };\\n          request = {\\n            method: 'POST',\\n            headers: headers,\\n            body: JSON.stringify(body)\\n          };\\n          return [4\\n          /*yield*/\\n          , retryIfServerError(function () {\\n            return fetch(endpoint, request);\\n          })];\\n\\n        case 1:\\n          response = _b.sent();\\n          if (!response.ok) return [3\\n          /*break*/\\n          , 3];\\n          return [4\\n          /*yield*/\\n          , response.json()];\\n\\n        case 2:\\n          responseValue = _b.sent();\\n          completedAuthToken = extractAuthTokenInfoFromResponse(responseValue);\\n          return [2\\n          /*return*/\\n          , completedAuthToken];\\n\\n        case 3:\\n          return [4\\n          /*yield*/\\n          , getErrorFromResponse('Generate Auth Token', response)];\\n\\n        case 4:\\n          throw _b.sent();\\n      }\\n    });\\n  });\\n}\\n\\nfunction getGenerateAuthTokenEndpoint(appConfig, _a) {\\n  var fid = _a.fid;\\n  return getInstallationsEndpoint(appConfig) + \\\"/\\\" + fid + \\\"/authTokens:generate\\\";\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n/**\\r\\n * Returns a valid authentication token for the installation. Generates a new\\r\\n * token if one doesn't exist, is expired or about to expire.\\r\\n *\\r\\n * Should only be called if the Firebase Installation is registered.\\r\\n */\\n\\n\\nfunction refreshAuthToken(dependencies, forceRefresh) {\\n  if (forceRefresh === void 0) {\\n    forceRefresh = false;\\n  }\\n\\n  return __awaiter(this, void 0, void 0, function () {\\n    var tokenPromise, entry, authToken, _a;\\n\\n    return __generator(this, function (_b) {\\n      switch (_b.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , update(dependencies.appConfig, function (oldEntry) {\\n            if (!isEntryRegistered(oldEntry)) {\\n              throw ERROR_FACTORY.create(\\\"not-registered\\\"\\n              /* NOT_REGISTERED */\\n              );\\n            }\\n\\n            var oldAuthToken = oldEntry.authToken;\\n\\n            if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\\n              // There is a valid token in the DB.\\n              return oldEntry;\\n            } else if (oldAuthToken.requestStatus === 1\\n            /* IN_PROGRESS */\\n            ) {\\n                // There already is a token request in progress.\\n                tokenPromise = waitUntilAuthTokenRequest(dependencies, forceRefresh);\\n                return oldEntry;\\n              } else {\\n              // No token or token expired.\\n              if (!navigator.onLine) {\\n                throw ERROR_FACTORY.create(\\\"app-offline\\\"\\n                /* APP_OFFLINE */\\n                );\\n              }\\n\\n              var inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\\n              tokenPromise = fetchAuthTokenFromServer(dependencies, inProgressEntry);\\n              return inProgressEntry;\\n            }\\n          })];\\n\\n        case 1:\\n          entry = _b.sent();\\n          if (!tokenPromise) return [3\\n          /*break*/\\n          , 3];\\n          return [4\\n          /*yield*/\\n          , tokenPromise];\\n\\n        case 2:\\n          _a = _b.sent();\\n          return [3\\n          /*break*/\\n          , 4];\\n\\n        case 3:\\n          _a = entry.authToken;\\n          _b.label = 4;\\n\\n        case 4:\\n          authToken = _a;\\n          return [2\\n          /*return*/\\n          , authToken];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * Call only if FID is registered and Auth Token request is in progress.\\r\\n *\\r\\n * Waits until the current pending request finishes. If the request times out,\\r\\n * tries once in this thread as well.\\r\\n */\\n\\n\\nfunction waitUntilAuthTokenRequest(dependencies, forceRefresh) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var entry, authToken;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , updateAuthTokenRequest(dependencies.appConfig)];\\n\\n        case 1:\\n          entry = _a.sent();\\n          _a.label = 2;\\n\\n        case 2:\\n          if (!(entry.authToken.requestStatus === 1\\n          /* IN_PROGRESS */\\n          )) return [3\\n            /*break*/\\n            , 5]; // generateAuthToken still in progress.\\n\\n          return [4\\n          /*yield*/\\n          , sleep(100)];\\n\\n        case 3:\\n          // generateAuthToken still in progress.\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , updateAuthTokenRequest(dependencies.appConfig)];\\n\\n        case 4:\\n          entry = _a.sent();\\n          return [3\\n          /*break*/\\n          , 2];\\n\\n        case 5:\\n          authToken = entry.authToken;\\n\\n          if (authToken.requestStatus === 0\\n          /* NOT_STARTED */\\n          ) {\\n              // The request timed out or failed in a different call. Try again.\\n              return [2\\n              /*return*/\\n              , refreshAuthToken(dependencies, forceRefresh)];\\n            } else {\\n            return [2\\n            /*return*/\\n            , authToken];\\n          }\\n\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * Called only if there is a GenerateAuthToken request in progress.\\r\\n *\\r\\n * Updates the InstallationEntry in the DB based on the status of the\\r\\n * GenerateAuthToken request.\\r\\n *\\r\\n * Returns the updated InstallationEntry.\\r\\n */\\n\\n\\nfunction updateAuthTokenRequest(appConfig) {\\n  return update(appConfig, function (oldEntry) {\\n    if (!isEntryRegistered(oldEntry)) {\\n      throw ERROR_FACTORY.create(\\\"not-registered\\\"\\n      /* NOT_REGISTERED */\\n      );\\n    }\\n\\n    var oldAuthToken = oldEntry.authToken;\\n\\n    if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\\n      return __assign(__assign({}, oldEntry), {\\n        authToken: {\\n          requestStatus: 0\\n          /* NOT_STARTED */\\n\\n        }\\n      });\\n    }\\n\\n    return oldEntry;\\n  });\\n}\\n\\nfunction fetchAuthTokenFromServer(dependencies, installationEntry) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var authToken, updatedInstallationEntry, e_1, updatedInstallationEntry;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          _a.trys.push([0, 3,, 8]);\\n\\n          return [4\\n          /*yield*/\\n          , generateAuthTokenRequest(dependencies, installationEntry)];\\n\\n        case 1:\\n          authToken = _a.sent();\\n          updatedInstallationEntry = __assign(__assign({}, installationEntry), {\\n            authToken: authToken\\n          });\\n          return [4\\n          /*yield*/\\n          , set(dependencies.appConfig, updatedInstallationEntry)];\\n\\n        case 2:\\n          _a.sent();\\n\\n          return [2\\n          /*return*/\\n          , authToken];\\n\\n        case 3:\\n          e_1 = _a.sent();\\n          if (!(isServerError(e_1) && (e_1.serverCode === 401 || e_1.serverCode === 404))) return [3\\n          /*break*/\\n          , 5]; // Server returned a \\\"FID not found\\\" or a \\\"Invalid authentication\\\" error.\\n          // Generate a new ID next time.\\n\\n          return [4\\n          /*yield*/\\n          , remove(dependencies.appConfig)];\\n\\n        case 4:\\n          // Server returned a \\\"FID not found\\\" or a \\\"Invalid authentication\\\" error.\\n          // Generate a new ID next time.\\n          _a.sent();\\n\\n          return [3\\n          /*break*/\\n          , 7];\\n\\n        case 5:\\n          updatedInstallationEntry = __assign(__assign({}, installationEntry), {\\n            authToken: {\\n              requestStatus: 0\\n              /* NOT_STARTED */\\n\\n            }\\n          });\\n          return [4\\n          /*yield*/\\n          , set(dependencies.appConfig, updatedInstallationEntry)];\\n\\n        case 6:\\n          _a.sent();\\n\\n          _a.label = 7;\\n\\n        case 7:\\n          throw e_1;\\n\\n        case 8:\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n\\nfunction isEntryRegistered(installationEntry) {\\n  return installationEntry !== undefined && installationEntry.registrationStatus === 2\\n  /* COMPLETED */\\n  ;\\n}\\n\\nfunction isAuthTokenValid(authToken) {\\n  return authToken.requestStatus === 2\\n  /* COMPLETED */\\n  && !isAuthTokenExpired(authToken);\\n}\\n\\nfunction isAuthTokenExpired(authToken) {\\n  var now = Date.now();\\n  return now < authToken.creationTime || authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER;\\n}\\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\\n\\n\\nfunction makeAuthTokenRequestInProgressEntry(oldEntry) {\\n  var inProgressAuthToken = {\\n    requestStatus: 1\\n    /* IN_PROGRESS */\\n    ,\\n    requestTime: Date.now()\\n  };\\n  return __assign(__assign({}, oldEntry), {\\n    authToken: inProgressAuthToken\\n  });\\n}\\n\\nfunction hasAuthTokenRequestTimedOut(authToken) {\\n  return authToken.requestStatus === 1\\n  /* IN_PROGRESS */\\n  && authToken.requestTime + PENDING_TIMEOUT_MS < Date.now();\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction _getId(dependencies) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var _a, installationEntry, registrationPromise;\\n\\n    return __generator(this, function (_b) {\\n      switch (_b.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , getInstallationEntry(dependencies.appConfig)];\\n\\n        case 1:\\n          _a = _b.sent(), installationEntry = _a.installationEntry, registrationPromise = _a.registrationPromise;\\n\\n          if (registrationPromise) {\\n            registrationPromise[\\\"catch\\\"](console.error);\\n          } else {\\n            // If the installation is already registered, update the authentication\\n            // token if needed.\\n            refreshAuthToken(dependencies)[\\\"catch\\\"](console.error);\\n          }\\n\\n          return [2\\n          /*return*/\\n          , installationEntry.fid];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction _getToken(dependencies, forceRefresh) {\\n  if (forceRefresh === void 0) {\\n    forceRefresh = false;\\n  }\\n\\n  return __awaiter(this, void 0, void 0, function () {\\n    var authToken;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , completeInstallationRegistration(dependencies.appConfig)];\\n\\n        case 1:\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , refreshAuthToken(dependencies, forceRefresh)];\\n\\n        case 2:\\n          authToken = _a.sent();\\n          return [2\\n          /*return*/\\n          , authToken.token];\\n      }\\n    });\\n  });\\n}\\n\\nfunction completeInstallationRegistration(appConfig) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var registrationPromise;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , getInstallationEntry(appConfig)];\\n\\n        case 1:\\n          registrationPromise = _a.sent().registrationPromise;\\n          if (!registrationPromise) return [3\\n          /*break*/\\n          , 3]; // A createInstallation request is in progress. Wait until it finishes.\\n\\n          return [4\\n          /*yield*/\\n          , registrationPromise];\\n\\n        case 2:\\n          // A createInstallation request is in progress. Wait until it finishes.\\n          _a.sent();\\n\\n          _a.label = 3;\\n\\n        case 3:\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction deleteInstallationRequest(appConfig, installationEntry) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var endpoint, headers, request, response;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          endpoint = getDeleteEndpoint(appConfig, installationEntry);\\n          headers = getHeadersWithAuth(appConfig, installationEntry);\\n          request = {\\n            method: 'DELETE',\\n            headers: headers\\n          };\\n          return [4\\n          /*yield*/\\n          , retryIfServerError(function () {\\n            return fetch(endpoint, request);\\n          })];\\n\\n        case 1:\\n          response = _a.sent();\\n          if (!!response.ok) return [3\\n          /*break*/\\n          , 3];\\n          return [4\\n          /*yield*/\\n          , getErrorFromResponse('Delete Installation', response)];\\n\\n        case 2:\\n          throw _a.sent();\\n\\n        case 3:\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n\\nfunction getDeleteEndpoint(appConfig, _a) {\\n  var fid = _a.fid;\\n  return getInstallationsEndpoint(appConfig) + \\\"/\\\" + fid;\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction deleteInstallation(dependencies) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var appConfig, entry;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          appConfig = dependencies.appConfig;\\n          return [4\\n          /*yield*/\\n          , update(appConfig, function (oldEntry) {\\n            if (oldEntry && oldEntry.registrationStatus === 0\\n            /* NOT_STARTED */\\n            ) {\\n                // Delete the unregistered entry without sending a deleteInstallation request.\\n                return undefined;\\n              }\\n\\n            return oldEntry;\\n          })];\\n\\n        case 1:\\n          entry = _a.sent();\\n          if (!entry) return [3\\n          /*break*/\\n          , 6];\\n          if (!(entry.registrationStatus === 1\\n          /* IN_PROGRESS */\\n          )) return [3\\n            /*break*/\\n            , 2]; // Can't delete while trying to register.\\n\\n          throw ERROR_FACTORY.create(\\\"delete-pending-registration\\\"\\n          /* DELETE_PENDING_REGISTRATION */\\n          );\\n\\n        case 2:\\n          if (!(entry.registrationStatus === 2\\n          /* COMPLETED */\\n          )) return [3\\n            /*break*/\\n            , 6];\\n          if (!!navigator.onLine) return [3\\n          /*break*/\\n          , 3];\\n          throw ERROR_FACTORY.create(\\\"app-offline\\\"\\n          /* APP_OFFLINE */\\n          );\\n\\n        case 3:\\n          return [4\\n          /*yield*/\\n          , deleteInstallationRequest(appConfig, entry)];\\n\\n        case 4:\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , remove(appConfig)];\\n\\n        case 5:\\n          _a.sent();\\n\\n          _a.label = 6;\\n\\n        case 6:\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n/**\\r\\n * Sets a new callback that will get called when Installation ID changes.\\r\\n * Returns an unsubscribe function that will remove the callback when called.\\r\\n */\\n\\n\\nfunction _onIdChange(_a, callback) {\\n  var appConfig = _a.appConfig;\\n  addCallback(appConfig, callback);\\n  return function () {\\n    removeCallback(appConfig, callback);\\n  };\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction extractAppConfig(app) {\\n  var e_1, _a;\\n\\n  if (!app || !app.options) {\\n    throw getMissingValueError('App Configuration');\\n  }\\n\\n  if (!app.name) {\\n    throw getMissingValueError('App Name');\\n  } // Required app config keys\\n\\n\\n  var configKeys = ['projectId', 'apiKey', 'appId'];\\n\\n  try {\\n    for (var configKeys_1 = __values(configKeys), configKeys_1_1 = configKeys_1.next(); !configKeys_1_1.done; configKeys_1_1 = configKeys_1.next()) {\\n      var keyName = configKeys_1_1.value;\\n\\n      if (!app.options[keyName]) {\\n        throw getMissingValueError(keyName);\\n      }\\n    }\\n  } catch (e_1_1) {\\n    e_1 = {\\n      error: e_1_1\\n    };\\n  } finally {\\n    try {\\n      if (configKeys_1_1 && !configKeys_1_1.done && (_a = configKeys_1[\\\"return\\\"])) _a.call(configKeys_1);\\n    } finally {\\n      if (e_1) throw e_1.error;\\n    }\\n  }\\n\\n  return {\\n    appName: app.name,\\n    projectId: app.options.projectId,\\n    apiKey: app.options.apiKey,\\n    appId: app.options.appId\\n  };\\n}\\n\\nfunction getMissingValueError(valueName) {\\n  return ERROR_FACTORY.create(\\\"missing-app-config-values\\\"\\n  /* MISSING_APP_CONFIG_VALUES */\\n  , {\\n    valueName: valueName\\n  });\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction registerInstallations(instance) {\\n  var installationsName = 'installations';\\n  instance.INTERNAL.registerComponent(new Component(installationsName, function (container) {\\n    var app = container.getProvider('app').getImmediate(); // Throws if app isn't configured properly.\\n\\n    var appConfig = extractAppConfig(app);\\n    var platformLoggerProvider = container.getProvider('platform-logger');\\n    var dependencies = {\\n      appConfig: appConfig,\\n      platformLoggerProvider: platformLoggerProvider\\n    };\\n    var installations = {\\n      app: app,\\n      getId: function getId() {\\n        return _getId(dependencies);\\n      },\\n      getToken: function getToken(forceRefresh) {\\n        return _getToken(dependencies, forceRefresh);\\n      },\\n      \\\"delete\\\": function _delete() {\\n        return deleteInstallation(dependencies);\\n      },\\n      onIdChange: function onIdChange(callback) {\\n        return _onIdChange(dependencies, callback);\\n      }\\n    };\\n    return installations;\\n  }, \\\"PUBLIC\\\"\\n  /* PUBLIC */\\n  ));\\n  instance.registerVersion(name, version);\\n}\\n\\nregisterInstallations(firebase);\\nexport { registerInstallations };\",\"import \\\"core-js/modules/es6.string.link\\\";\\nimport \\\"core-js/modules/es6.string.starts-with\\\";\\nimport \\\"core-js/modules/es6.array.some\\\";\\nimport \\\"core-js/modules/es6.promise\\\";\\nimport \\\"core-js/modules/es6.object.to-string\\\";\\nimport \\\"core-js/modules/es6.object.define-property\\\";\\nimport \\\"core-js/modules/es6.date.now\\\";\\nimport \\\"core-js/modules/es7.array.includes\\\";\\nimport \\\"core-js/modules/es6.string.includes\\\";\\nimport \\\"core-js/modules/es6.array.map\\\";\\nimport \\\"core-js/modules/es6.regexp.replace\\\";\\nimport \\\"core-js/modules/es6.typed.uint8-array\\\";\\nimport \\\"core-js/modules/es6.function.name\\\";\\nimport firebase from '@firebase/app';\\nimport '@firebase/installations';\\nimport { Component } from '@firebase/component';\\nimport { __values, __spread, __awaiter, __generator, __assign } from 'tslib';\\nimport { ErrorFactory } from '@firebase/util';\\nimport { deleteDb, openDb } from 'idb';\\n/**\\r\\n * @license\\r\\n * Copyright 2017 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\nvar _a;\\n\\nvar ERROR_MAP = (_a = {}, _a[\\\"missing-app-config-values\\\"\\n/* MISSING_APP_CONFIG_VALUES */\\n] = 'Missing App configuration value: \\\"{$valueName}\\\"', _a[\\\"only-available-in-window\\\"\\n/* AVAILABLE_IN_WINDOW */\\n] = 'This method is available in a Window context.', _a[\\\"only-available-in-sw\\\"\\n/* AVAILABLE_IN_SW */\\n] = 'This method is available in a service worker context.', _a[\\\"permission-default\\\"\\n/* PERMISSION_DEFAULT */\\n] = 'The notification permission was not granted and dismissed instead.', _a[\\\"permission-blocked\\\"\\n/* PERMISSION_BLOCKED */\\n] = 'The notification permission was not granted and blocked instead.', _a[\\\"unsupported-browser\\\"\\n/* UNSUPPORTED_BROWSER */\\n] = \\\"This browser doesn't support the API's required to use the firebase SDK.\\\", _a[\\\"failed-service-worker-registration\\\"\\n/* FAILED_DEFAULT_REGISTRATION */\\n] = 'We are unable to register the default service worker. {$browserErrorMessage}', _a[\\\"token-subscribe-failed\\\"\\n/* TOKEN_SUBSCRIBE_FAILED */\\n] = 'A problem occured while subscribing the user to FCM: {$errorInfo}', _a[\\\"token-subscribe-no-token\\\"\\n/* TOKEN_SUBSCRIBE_NO_TOKEN */\\n] = 'FCM returned no token when subscribing the user to push.', _a[\\\"token-unsubscribe-failed\\\"\\n/* TOKEN_UNSUBSCRIBE_FAILED */\\n] = 'A problem occured while unsubscribing the ' + 'user from FCM: {$errorInfo}', _a[\\\"token-update-failed\\\"\\n/* TOKEN_UPDATE_FAILED */\\n] = 'A problem occured while updating the user from FCM: {$errorInfo}', _a[\\\"token-update-no-token\\\"\\n/* TOKEN_UPDATE_NO_TOKEN */\\n] = 'FCM returned no token when updating the user to push.', _a[\\\"use-sw-after-get-token\\\"\\n/* USE_SW_AFTER_GET_TOKEN */\\n] = 'The useServiceWorker() method may only be called once and must be ' + 'called before calling getToken() to ensure your service worker is used.', _a[\\\"invalid-sw-registration\\\"\\n/* INVALID_SW_REGISTRATION */\\n] = 'The input to useServiceWorker() must be a ServiceWorkerRegistration.', _a[\\\"invalid-bg-handler\\\"\\n/* INVALID_BG_HANDLER */\\n] = 'The input to setBackgroundMessageHandler() must be a function.', _a[\\\"invalid-vapid-key\\\"\\n/* INVALID_VAPID_KEY */\\n] = 'The public VAPID key must be a string.', _a[\\\"use-vapid-key-after-get-token\\\"\\n/* USE_VAPID_KEY_AFTER_GET_TOKEN */\\n] = 'The usePublicVapidKey() method may only be called once and must be ' + 'called before calling getToken() to ensure your VAPID key is used.', _a);\\nvar ERROR_FACTORY = new ErrorFactory('messaging', 'Messaging', ERROR_MAP);\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\nfunction extractAppConfig(app) {\\n  var e_1, _a;\\n\\n  if (!app || !app.options) {\\n    throw getMissingValueError('App Configuration Object');\\n  }\\n\\n  if (!app.name) {\\n    throw getMissingValueError('App Name');\\n  } // Required app config keys\\n\\n\\n  var configKeys = ['projectId', 'apiKey', 'appId', 'messagingSenderId'];\\n  var options = app.options;\\n\\n  try {\\n    for (var configKeys_1 = __values(configKeys), configKeys_1_1 = configKeys_1.next(); !configKeys_1_1.done; configKeys_1_1 = configKeys_1.next()) {\\n      var keyName = configKeys_1_1.value;\\n\\n      if (!options[keyName]) {\\n        throw getMissingValueError(keyName);\\n      }\\n    }\\n  } catch (e_1_1) {\\n    e_1 = {\\n      error: e_1_1\\n    };\\n  } finally {\\n    try {\\n      if (configKeys_1_1 && !configKeys_1_1.done && (_a = configKeys_1[\\\"return\\\"])) _a.call(configKeys_1);\\n    } finally {\\n      if (e_1) throw e_1.error;\\n    }\\n  }\\n\\n  return {\\n    appName: app.name,\\n    projectId: options.projectId,\\n    apiKey: options.apiKey,\\n    appId: options.appId,\\n    senderId: options.messagingSenderId\\n  };\\n}\\n\\nfunction getMissingValueError(valueName) {\\n  return ERROR_FACTORY.create(\\\"missing-app-config-values\\\"\\n  /* MISSING_APP_CONFIG_VALUES */\\n  , {\\n    valueName: valueName\\n  });\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2017 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction arrayToBase64(array) {\\n  var uint8Array = new Uint8Array(array);\\n  var base64String = btoa(String.fromCharCode.apply(String, __spread(uint8Array)));\\n  return base64String.replace(/=/g, '').replace(/\\\\+/g, '-').replace(/\\\\//g, '_');\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nvar OLD_DB_NAME = 'fcm_token_details_db';\\n/**\\r\\n * The last DB version of 'fcm_token_details_db' was 4. This is one higher,\\r\\n * so that the upgrade callback is called for all versions of the old DB.\\r\\n */\\n\\nvar OLD_DB_VERSION = 5;\\nvar OLD_OBJECT_STORE_NAME = 'fcm_token_object_Store';\\n\\nfunction migrateOldDatabase(senderId) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var databases, dbNames, tokenDetails, db;\\n\\n    var _this = this;\\n\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          if (!('databases' in indexedDB)) return [3\\n          /*break*/\\n          , 2];\\n          return [4\\n          /*yield*/\\n          , indexedDB.databases()];\\n\\n        case 1:\\n          databases = _a.sent();\\n          dbNames = databases.map(function (db) {\\n            return db.name;\\n          });\\n\\n          if (!dbNames.includes(OLD_DB_NAME)) {\\n            // old DB didn't exist, no need to open.\\n            return [2\\n            /*return*/\\n            , null];\\n          }\\n\\n          _a.label = 2;\\n\\n        case 2:\\n          tokenDetails = null;\\n          return [4\\n          /*yield*/\\n          , openDb(OLD_DB_NAME, OLD_DB_VERSION, function (db) {\\n            return __awaiter(_this, void 0, void 0, function () {\\n              var objectStore, value, oldDetails, oldDetails, oldDetails;\\n\\n              var _a;\\n\\n              return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                  case 0:\\n                    if (db.oldVersion < 2) {\\n                      // Database too old, skip migration.\\n                      return [2\\n                      /*return*/\\n                      ];\\n                    }\\n\\n                    if (!db.objectStoreNames.contains(OLD_OBJECT_STORE_NAME)) {\\n                      // Database did not exist. Nothing to do.\\n                      return [2\\n                      /*return*/\\n                      ];\\n                    }\\n\\n                    objectStore = db.transaction.objectStore(OLD_OBJECT_STORE_NAME);\\n                    return [4\\n                    /*yield*/\\n                    , objectStore.index('fcmSenderId').get(senderId)];\\n\\n                  case 1:\\n                    value = _b.sent();\\n                    return [4\\n                    /*yield*/\\n                    , objectStore.clear()];\\n\\n                  case 2:\\n                    _b.sent();\\n\\n                    if (!value) {\\n                      // No entry in the database, nothing to migrate.\\n                      return [2\\n                      /*return*/\\n                      ];\\n                    }\\n\\n                    if (db.oldVersion === 2) {\\n                      oldDetails = value;\\n\\n                      if (!oldDetails.auth || !oldDetails.p256dh || !oldDetails.endpoint) {\\n                        return [2\\n                        /*return*/\\n                        ];\\n                      }\\n\\n                      tokenDetails = {\\n                        token: oldDetails.fcmToken,\\n                        createTime: (_a = oldDetails.createTime) !== null && _a !== void 0 ? _a : Date.now(),\\n                        subscriptionOptions: {\\n                          auth: oldDetails.auth,\\n                          p256dh: oldDetails.p256dh,\\n                          endpoint: oldDetails.endpoint,\\n                          swScope: oldDetails.swScope,\\n                          vapidKey: typeof oldDetails.vapidKey === 'string' ? oldDetails.vapidKey : arrayToBase64(oldDetails.vapidKey)\\n                        }\\n                      };\\n                    } else if (db.oldVersion === 3) {\\n                      oldDetails = value;\\n                      tokenDetails = {\\n                        token: oldDetails.fcmToken,\\n                        createTime: oldDetails.createTime,\\n                        subscriptionOptions: {\\n                          auth: arrayToBase64(oldDetails.auth),\\n                          p256dh: arrayToBase64(oldDetails.p256dh),\\n                          endpoint: oldDetails.endpoint,\\n                          swScope: oldDetails.swScope,\\n                          vapidKey: arrayToBase64(oldDetails.vapidKey)\\n                        }\\n                      };\\n                    } else if (db.oldVersion === 4) {\\n                      oldDetails = value;\\n                      tokenDetails = {\\n                        token: oldDetails.fcmToken,\\n                        createTime: oldDetails.createTime,\\n                        subscriptionOptions: {\\n                          auth: arrayToBase64(oldDetails.auth),\\n                          p256dh: arrayToBase64(oldDetails.p256dh),\\n                          endpoint: oldDetails.endpoint,\\n                          swScope: oldDetails.swScope,\\n                          vapidKey: arrayToBase64(oldDetails.vapidKey)\\n                        }\\n                      };\\n                    }\\n\\n                    return [2\\n                    /*return*/\\n                    ];\\n                }\\n              });\\n            });\\n          })];\\n\\n        case 3:\\n          db = _a.sent();\\n          db.close(); // Delete all old databases.\\n\\n          return [4\\n          /*yield*/\\n          , deleteDb(OLD_DB_NAME)];\\n\\n        case 4:\\n          // Delete all old databases.\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , deleteDb('fcm_vapid_details_db')];\\n\\n        case 5:\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , deleteDb('undefined')];\\n\\n        case 6:\\n          _a.sent();\\n\\n          return [2\\n          /*return*/\\n          , checkTokenDetails(tokenDetails) ? tokenDetails : null];\\n      }\\n    });\\n  });\\n}\\n\\nfunction checkTokenDetails(tokenDetails) {\\n  if (!tokenDetails || !tokenDetails.subscriptionOptions) {\\n    return false;\\n  }\\n\\n  var subscriptionOptions = tokenDetails.subscriptionOptions;\\n  return typeof tokenDetails.createTime === 'number' && tokenDetails.createTime > 0 && typeof tokenDetails.token === 'string' && tokenDetails.token.length > 0 && typeof subscriptionOptions.auth === 'string' && subscriptionOptions.auth.length > 0 && typeof subscriptionOptions.p256dh === 'string' && subscriptionOptions.p256dh.length > 0 && typeof subscriptionOptions.endpoint === 'string' && subscriptionOptions.endpoint.length > 0 && typeof subscriptionOptions.swScope === 'string' && subscriptionOptions.swScope.length > 0 && typeof subscriptionOptions.vapidKey === 'string' && subscriptionOptions.vapidKey.length > 0;\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n// Exported for tests.\\n\\n\\nvar DATABASE_NAME = 'firebase-messaging-database';\\nvar DATABASE_VERSION = 1;\\nvar OBJECT_STORE_NAME = 'firebase-messaging-store';\\nvar dbPromise = null;\\n\\nfunction getDbPromise() {\\n  if (!dbPromise) {\\n    dbPromise = openDb(DATABASE_NAME, DATABASE_VERSION, function (upgradeDb) {\\n      // We don't use 'break' in this switch statement, the fall-through\\n      // behavior is what we want, because if there are multiple versions between\\n      // the old version and the current version, we want ALL the migrations\\n      // that correspond to those versions to run, not only the last one.\\n      // eslint-disable-next-line default-case\\n      switch (upgradeDb.oldVersion) {\\n        case 0:\\n          upgradeDb.createObjectStore(OBJECT_STORE_NAME);\\n      }\\n    });\\n  }\\n\\n  return dbPromise;\\n}\\n/** Gets record(s) from the objectStore that match the given key. */\\n\\n\\nfunction dbGet(firebaseDependencies) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var key, db, tokenDetails, oldTokenDetails;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          key = getKey(firebaseDependencies);\\n          return [4\\n          /*yield*/\\n          , getDbPromise()];\\n\\n        case 1:\\n          db = _a.sent();\\n          return [4\\n          /*yield*/\\n          , db.transaction(OBJECT_STORE_NAME).objectStore(OBJECT_STORE_NAME).get(key)];\\n\\n        case 2:\\n          tokenDetails = _a.sent();\\n          if (!tokenDetails) return [3\\n          /*break*/\\n          , 3];\\n          return [2\\n          /*return*/\\n          , tokenDetails];\\n\\n        case 3:\\n          return [4\\n          /*yield*/\\n          , migrateOldDatabase(firebaseDependencies.appConfig.senderId)];\\n\\n        case 4:\\n          oldTokenDetails = _a.sent();\\n          if (!oldTokenDetails) return [3\\n          /*break*/\\n          , 6];\\n          return [4\\n          /*yield*/\\n          , dbSet(firebaseDependencies, oldTokenDetails)];\\n\\n        case 5:\\n          _a.sent();\\n\\n          return [2\\n          /*return*/\\n          , oldTokenDetails];\\n\\n        case 6:\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n/** Assigns or overwrites the record for the given key with the given value. */\\n\\n\\nfunction dbSet(firebaseDependencies, tokenDetails) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var key, db, tx;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          key = getKey(firebaseDependencies);\\n          return [4\\n          /*yield*/\\n          , getDbPromise()];\\n\\n        case 1:\\n          db = _a.sent();\\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\\n          return [4\\n          /*yield*/\\n          , tx.objectStore(OBJECT_STORE_NAME).put(tokenDetails, key)];\\n\\n        case 2:\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , tx.complete];\\n\\n        case 3:\\n          _a.sent();\\n\\n          return [2\\n          /*return*/\\n          , tokenDetails];\\n      }\\n    });\\n  });\\n}\\n/** Removes record(s) from the objectStore that match the given key. */\\n\\n\\nfunction dbRemove(firebaseDependencies) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var key, db, tx;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          key = getKey(firebaseDependencies);\\n          return [4\\n          /*yield*/\\n          , getDbPromise()];\\n\\n        case 1:\\n          db = _a.sent();\\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\\n          return [4\\n          /*yield*/\\n          , tx.objectStore(OBJECT_STORE_NAME)[\\\"delete\\\"](key)];\\n\\n        case 2:\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , tx.complete];\\n\\n        case 3:\\n          _a.sent();\\n\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n\\nfunction getKey(_a) {\\n  var appConfig = _a.appConfig;\\n  return appConfig.appId;\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nvar DEFAULT_SW_PATH = '/firebase-messaging-sw.js';\\nvar DEFAULT_SW_SCOPE = '/firebase-cloud-messaging-push-scope';\\nvar DEFAULT_VAPID_KEY = 'BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4';\\nvar ENDPOINT = 'https://fcmregistrations.googleapis.com/v1';\\n/** Key of FCM Payload in Notification's data field. */\\n\\nvar FCM_MSG = 'FCM_MSG';\\nvar CONSOLE_CAMPAIGN_ID = 'google.c.a.c_id';\\nvar CONSOLE_CAMPAIGN_NAME = 'google.c.a.c_l';\\nvar CONSOLE_CAMPAIGN_TIME = 'google.c.a.ts';\\n/** Set to '1' if Analytics is enabled for the campaign */\\n\\nvar CONSOLE_CAMPAIGN_ANALYTICS_ENABLED = 'google.c.a.e';\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\nfunction requestGetToken(firebaseDependencies, subscriptionOptions) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var headers, body, subscribeOptions, responseData, response, err_1, message;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , getHeaders(firebaseDependencies)];\\n\\n        case 1:\\n          headers = _a.sent();\\n          body = getBody(subscriptionOptions);\\n          subscribeOptions = {\\n            method: 'POST',\\n            headers: headers,\\n            body: JSON.stringify(body)\\n          };\\n          _a.label = 2;\\n\\n        case 2:\\n          _a.trys.push([2, 5,, 6]);\\n\\n          return [4\\n          /*yield*/\\n          , fetch(getEndpoint(firebaseDependencies.appConfig), subscribeOptions)];\\n\\n        case 3:\\n          response = _a.sent();\\n          return [4\\n          /*yield*/\\n          , response.json()];\\n\\n        case 4:\\n          responseData = _a.sent();\\n          return [3\\n          /*break*/\\n          , 6];\\n\\n        case 5:\\n          err_1 = _a.sent();\\n          throw ERROR_FACTORY.create(\\\"token-subscribe-failed\\\"\\n          /* TOKEN_SUBSCRIBE_FAILED */\\n          , {\\n            errorInfo: err_1\\n          });\\n\\n        case 6:\\n          if (responseData.error) {\\n            message = responseData.error.message;\\n            throw ERROR_FACTORY.create(\\\"token-subscribe-failed\\\"\\n            /* TOKEN_SUBSCRIBE_FAILED */\\n            , {\\n              errorInfo: message\\n            });\\n          }\\n\\n          if (!responseData.token) {\\n            throw ERROR_FACTORY.create(\\\"token-subscribe-no-token\\\"\\n            /* TOKEN_SUBSCRIBE_NO_TOKEN */\\n            );\\n          }\\n\\n          return [2\\n          /*return*/\\n          , responseData.token];\\n      }\\n    });\\n  });\\n}\\n\\nfunction requestUpdateToken(firebaseDependencies, tokenDetails) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var headers, body, updateOptions, responseData, response, err_2, message;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , getHeaders(firebaseDependencies)];\\n\\n        case 1:\\n          headers = _a.sent();\\n          body = getBody(tokenDetails.subscriptionOptions);\\n          updateOptions = {\\n            method: 'PATCH',\\n            headers: headers,\\n            body: JSON.stringify(body)\\n          };\\n          _a.label = 2;\\n\\n        case 2:\\n          _a.trys.push([2, 5,, 6]);\\n\\n          return [4\\n          /*yield*/\\n          , fetch(getEndpoint(firebaseDependencies.appConfig) + \\\"/\\\" + tokenDetails.token, updateOptions)];\\n\\n        case 3:\\n          response = _a.sent();\\n          return [4\\n          /*yield*/\\n          , response.json()];\\n\\n        case 4:\\n          responseData = _a.sent();\\n          return [3\\n          /*break*/\\n          , 6];\\n\\n        case 5:\\n          err_2 = _a.sent();\\n          throw ERROR_FACTORY.create(\\\"token-update-failed\\\"\\n          /* TOKEN_UPDATE_FAILED */\\n          , {\\n            errorInfo: err_2\\n          });\\n\\n        case 6:\\n          if (responseData.error) {\\n            message = responseData.error.message;\\n            throw ERROR_FACTORY.create(\\\"token-update-failed\\\"\\n            /* TOKEN_UPDATE_FAILED */\\n            , {\\n              errorInfo: message\\n            });\\n          }\\n\\n          if (!responseData.token) {\\n            throw ERROR_FACTORY.create(\\\"token-update-no-token\\\"\\n            /* TOKEN_UPDATE_NO_TOKEN */\\n            );\\n          }\\n\\n          return [2\\n          /*return*/\\n          , responseData.token];\\n      }\\n    });\\n  });\\n}\\n\\nfunction requestDeleteToken(firebaseDependencies, token) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var headers, unsubscribeOptions, response, responseData, message, err_3;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , getHeaders(firebaseDependencies)];\\n\\n        case 1:\\n          headers = _a.sent();\\n          unsubscribeOptions = {\\n            method: 'DELETE',\\n            headers: headers\\n          };\\n          _a.label = 2;\\n\\n        case 2:\\n          _a.trys.push([2, 5,, 6]);\\n\\n          return [4\\n          /*yield*/\\n          , fetch(getEndpoint(firebaseDependencies.appConfig) + \\\"/\\\" + token, unsubscribeOptions)];\\n\\n        case 3:\\n          response = _a.sent();\\n          return [4\\n          /*yield*/\\n          , response.json()];\\n\\n        case 4:\\n          responseData = _a.sent();\\n\\n          if (responseData.error) {\\n            message = responseData.error.message;\\n            throw ERROR_FACTORY.create(\\\"token-unsubscribe-failed\\\"\\n            /* TOKEN_UNSUBSCRIBE_FAILED */\\n            , {\\n              errorInfo: message\\n            });\\n          }\\n\\n          return [3\\n          /*break*/\\n          , 6];\\n\\n        case 5:\\n          err_3 = _a.sent();\\n          throw ERROR_FACTORY.create(\\\"token-unsubscribe-failed\\\"\\n          /* TOKEN_UNSUBSCRIBE_FAILED */\\n          , {\\n            errorInfo: err_3\\n          });\\n\\n        case 6:\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n\\nfunction getEndpoint(_a) {\\n  var projectId = _a.projectId;\\n  return ENDPOINT + \\\"/projects/\\\" + projectId + \\\"/registrations\\\";\\n}\\n\\nfunction getHeaders(_a) {\\n  var appConfig = _a.appConfig,\\n      installations = _a.installations;\\n  return __awaiter(this, void 0, void 0, function () {\\n    var authToken;\\n    return __generator(this, function (_b) {\\n      switch (_b.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , installations.getToken()];\\n\\n        case 1:\\n          authToken = _b.sent();\\n          return [2\\n          /*return*/\\n          , new Headers({\\n            'Content-Type': 'application/json',\\n            Accept: 'application/json',\\n            'x-goog-api-key': appConfig.apiKey,\\n            'x-goog-firebase-installations-auth': \\\"FIS \\\" + authToken\\n          })];\\n      }\\n    });\\n  });\\n}\\n\\nfunction getBody(_a) {\\n  var p256dh = _a.p256dh,\\n      auth = _a.auth,\\n      endpoint = _a.endpoint,\\n      vapidKey = _a.vapidKey;\\n  var body = {\\n    web: {\\n      endpoint: endpoint,\\n      auth: auth,\\n      p256dh: p256dh\\n    }\\n  };\\n\\n  if (vapidKey !== DEFAULT_VAPID_KEY) {\\n    body.web.applicationPubKey = vapidKey;\\n  }\\n\\n  return body;\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n/** UpdateRegistration will be called once every week. */\\n\\n\\nvar TOKEN_EXPIRATION_MS = 7 * 24 * 60 * 60 * 1000; // 7 days\\n\\nfunction getToken(firebaseDependencies, swRegistration, vapidKey) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var pushSubscription, tokenDetails, subscriptionOptions, e_1;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          if (Notification.permission !== 'granted') {\\n            throw ERROR_FACTORY.create(\\\"permission-blocked\\\"\\n            /* PERMISSION_BLOCKED */\\n            );\\n          }\\n\\n          return [4\\n          /*yield*/\\n          , getPushSubscription(swRegistration, vapidKey)];\\n\\n        case 1:\\n          pushSubscription = _a.sent();\\n          return [4\\n          /*yield*/\\n          , dbGet(firebaseDependencies)];\\n\\n        case 2:\\n          tokenDetails = _a.sent();\\n          subscriptionOptions = {\\n            vapidKey: vapidKey,\\n            swScope: swRegistration.scope,\\n            endpoint: pushSubscription.endpoint,\\n            auth: arrayToBase64(pushSubscription.getKey('auth')),\\n            p256dh: arrayToBase64(pushSubscription.getKey('p256dh'))\\n          };\\n          if (!!tokenDetails) return [3\\n          /*break*/\\n          , 3]; // No token, get a new one.\\n\\n          return [2\\n          /*return*/\\n          , getNewToken(firebaseDependencies, subscriptionOptions)];\\n\\n        case 3:\\n          if (!!isTokenValid(tokenDetails.subscriptionOptions, subscriptionOptions)) return [3\\n          /*break*/\\n          , 8];\\n          _a.label = 4;\\n\\n        case 4:\\n          _a.trys.push([4, 6,, 7]);\\n\\n          return [4\\n          /*yield*/\\n          , requestDeleteToken(firebaseDependencies, tokenDetails.token)];\\n\\n        case 5:\\n          _a.sent();\\n\\n          return [3\\n          /*break*/\\n          , 7];\\n\\n        case 6:\\n          e_1 = _a.sent(); // Suppress errors because of #2364\\n\\n          console.warn(e_1);\\n          return [3\\n          /*break*/\\n          , 7];\\n\\n        case 7:\\n          return [2\\n          /*return*/\\n          , getNewToken(firebaseDependencies, subscriptionOptions)];\\n\\n        case 8:\\n          if (Date.now() >= tokenDetails.createTime + TOKEN_EXPIRATION_MS) {\\n            // Weekly token refresh\\n            return [2\\n            /*return*/\\n            , updateToken({\\n              token: tokenDetails.token,\\n              createTime: Date.now(),\\n              subscriptionOptions: subscriptionOptions\\n            }, firebaseDependencies, swRegistration)];\\n          } else {\\n            // Valid token, nothing to do.\\n            return [2\\n            /*return*/\\n            , tokenDetails.token];\\n          }\\n\\n        case 9:\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * This method deletes the token from the database, unsubscribes the token from\\r\\n * FCM, and unregisters the push subscription if it exists.\\r\\n */\\n\\n\\nfunction deleteToken(firebaseDependencies, swRegistration) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var tokenDetails, pushSubscription;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , dbGet(firebaseDependencies)];\\n\\n        case 1:\\n          tokenDetails = _a.sent();\\n          if (!tokenDetails) return [3\\n          /*break*/\\n          , 4];\\n          return [4\\n          /*yield*/\\n          , requestDeleteToken(firebaseDependencies, tokenDetails.token)];\\n\\n        case 2:\\n          _a.sent();\\n\\n          return [4\\n          /*yield*/\\n          , dbRemove(firebaseDependencies)];\\n\\n        case 3:\\n          _a.sent();\\n\\n          _a.label = 4;\\n\\n        case 4:\\n          return [4\\n          /*yield*/\\n          , swRegistration.pushManager.getSubscription()];\\n\\n        case 5:\\n          pushSubscription = _a.sent();\\n\\n          if (pushSubscription) {\\n            return [2\\n            /*return*/\\n            , pushSubscription.unsubscribe()];\\n          } // If there's no SW, consider it a success.\\n\\n\\n          return [2\\n          /*return*/\\n          , true];\\n      }\\n    });\\n  });\\n}\\n\\nfunction updateToken(tokenDetails, firebaseDependencies, swRegistration) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var updatedToken, updatedTokenDetails, e_2;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          _a.trys.push([0, 3,, 5]);\\n\\n          return [4\\n          /*yield*/\\n          , requestUpdateToken(firebaseDependencies, tokenDetails)];\\n\\n        case 1:\\n          updatedToken = _a.sent();\\n          updatedTokenDetails = __assign({\\n            token: updatedToken,\\n            createTime: Date.now()\\n          }, tokenDetails);\\n          return [4\\n          /*yield*/\\n          , dbSet(firebaseDependencies, updatedTokenDetails)];\\n\\n        case 2:\\n          _a.sent();\\n\\n          return [2\\n          /*return*/\\n          , updatedToken];\\n\\n        case 3:\\n          e_2 = _a.sent();\\n          return [4\\n          /*yield*/\\n          , deleteToken(firebaseDependencies, swRegistration)];\\n\\n        case 4:\\n          _a.sent();\\n\\n          throw e_2;\\n\\n        case 5:\\n          return [2\\n          /*return*/\\n          ];\\n      }\\n    });\\n  });\\n}\\n\\nfunction getNewToken(firebaseDependencies, subscriptionOptions) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var token, tokenDetails;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , requestGetToken(firebaseDependencies, subscriptionOptions)];\\n\\n        case 1:\\n          token = _a.sent();\\n          tokenDetails = {\\n            token: token,\\n            createTime: Date.now(),\\n            subscriptionOptions: subscriptionOptions\\n          };\\n          return [4\\n          /*yield*/\\n          , dbSet(firebaseDependencies, tokenDetails)];\\n\\n        case 2:\\n          _a.sent();\\n\\n          return [2\\n          /*return*/\\n          , tokenDetails.token];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * Gets a PushSubscription for the current user.\\r\\n */\\n\\n\\nfunction getPushSubscription(swRegistration, vapidKey) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var subscription;\\n    return __generator(this, function (_a) {\\n      switch (_a.label) {\\n        case 0:\\n          return [4\\n          /*yield*/\\n          , swRegistration.pushManager.getSubscription()];\\n\\n        case 1:\\n          subscription = _a.sent();\\n\\n          if (subscription) {\\n            return [2\\n            /*return*/\\n            , subscription];\\n          }\\n\\n          return [2\\n          /*return*/\\n          , swRegistration.pushManager.subscribe({\\n            userVisibleOnly: true,\\n            applicationServerKey: vapidKey\\n          })];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * Checks if the saved tokenDetails object matches the configuration provided.\\r\\n */\\n\\n\\nfunction isTokenValid(dbOptions, currentOptions) {\\n  var isVapidKeyEqual = currentOptions.vapidKey === dbOptions.vapidKey;\\n  var isEndpointEqual = currentOptions.endpoint === dbOptions.endpoint;\\n  var isAuthEqual = currentOptions.auth === dbOptions.auth;\\n  var isP256dhEqual = currentOptions.p256dh === dbOptions.p256dh;\\n  return isVapidKeyEqual && isEndpointEqual && isAuthEqual && isP256dhEqual;\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2017 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nvar MessageType;\\n\\n(function (MessageType) {\\n  MessageType[\\\"PUSH_RECEIVED\\\"] = \\\"push-received\\\";\\n  MessageType[\\\"NOTIFICATION_CLICKED\\\"] = \\\"notification-clicked\\\";\\n})(MessageType || (MessageType = {}));\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nfunction isConsoleMessage(data) {\\n  // This message has a campaign ID, meaning it was sent using the\\n  // Firebase Console.\\n  return typeof data === 'object' && !!data && CONSOLE_CAMPAIGN_ID in data;\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2017 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nvar WindowController =\\n/** @class */\\nfunction () {\\n  function WindowController(firebaseDependencies) {\\n    var _this = this;\\n\\n    this.firebaseDependencies = firebaseDependencies;\\n    this.vapidKey = null;\\n    this.onMessageCallback = null;\\n    navigator.serviceWorker.addEventListener('message', function (e) {\\n      return _this.messageEventListener(e);\\n    });\\n  }\\n\\n  Object.defineProperty(WindowController.prototype, \\\"app\\\", {\\n    get: function get() {\\n      return this.firebaseDependencies.app;\\n    },\\n    enumerable: true,\\n    configurable: true\\n  });\\n\\n  WindowController.prototype.getToken = function () {\\n    return __awaiter(this, void 0, void 0, function () {\\n      var swRegistration;\\n      return __generator(this, function (_a) {\\n        switch (_a.label) {\\n          case 0:\\n            if (!this.vapidKey) {\\n              this.vapidKey = DEFAULT_VAPID_KEY;\\n            }\\n\\n            return [4\\n            /*yield*/\\n            , this.getServiceWorkerRegistration()];\\n\\n          case 1:\\n            swRegistration = _a.sent();\\n            if (!(Notification.permission === 'default')) return [3\\n            /*break*/\\n            , 3]; // The user hasn't allowed or denied notifications yet. Ask them.\\n\\n            return [4\\n            /*yield*/\\n            , Notification.requestPermission()];\\n\\n          case 2:\\n            // The user hasn't allowed or denied notifications yet. Ask them.\\n            _a.sent();\\n\\n            _a.label = 3;\\n\\n          case 3:\\n            if (Notification.permission !== 'granted') {\\n              throw ERROR_FACTORY.create(\\\"permission-blocked\\\"\\n              /* PERMISSION_BLOCKED */\\n              );\\n            }\\n\\n            return [2\\n            /*return*/\\n            , getToken(this.firebaseDependencies, swRegistration, this.vapidKey)];\\n        }\\n      });\\n    });\\n  };\\n\\n  WindowController.prototype.deleteToken = function () {\\n    return __awaiter(this, void 0, void 0, function () {\\n      var swRegistration;\\n      return __generator(this, function (_a) {\\n        switch (_a.label) {\\n          case 0:\\n            return [4\\n            /*yield*/\\n            , this.getServiceWorkerRegistration()];\\n\\n          case 1:\\n            swRegistration = _a.sent();\\n            return [2\\n            /*return*/\\n            , deleteToken(this.firebaseDependencies, swRegistration)];\\n        }\\n      });\\n    });\\n  };\\n  /**\\r\\n   * Request permission if it is not currently granted.\\r\\n   *\\r\\n   * @return Resolves if the permission was granted, rejects otherwise.\\r\\n   *\\r\\n   * @deprecated Use Notification.requestPermission() instead.\\r\\n   * https://developer.mozilla.org/en-US/docs/Web/API/Notification/requestPermission\\r\\n   */\\n\\n\\n  WindowController.prototype.requestPermission = function () {\\n    return __awaiter(this, void 0, void 0, function () {\\n      var permissionResult;\\n      return __generator(this, function (_a) {\\n        switch (_a.label) {\\n          case 0:\\n            if (Notification.permission === 'granted') {\\n              return [2\\n              /*return*/\\n              ];\\n            }\\n\\n            return [4\\n            /*yield*/\\n            , Notification.requestPermission()];\\n\\n          case 1:\\n            permissionResult = _a.sent();\\n\\n            if (permissionResult === 'granted') {\\n              return [2\\n              /*return*/\\n              ];\\n            } else if (permissionResult === 'denied') {\\n              throw ERROR_FACTORY.create(\\\"permission-blocked\\\"\\n              /* PERMISSION_BLOCKED */\\n              );\\n            } else {\\n              throw ERROR_FACTORY.create(\\\"permission-default\\\"\\n              /* PERMISSION_DEFAULT */\\n              );\\n            }\\n\\n        }\\n      });\\n    });\\n  }; // TODO: Deprecate this and make VAPID key a parameter in getToken.\\n\\n\\n  WindowController.prototype.usePublicVapidKey = function (vapidKey) {\\n    if (this.vapidKey !== null) {\\n      throw ERROR_FACTORY.create(\\\"use-vapid-key-after-get-token\\\"\\n      /* USE_VAPID_KEY_AFTER_GET_TOKEN */\\n      );\\n    }\\n\\n    if (typeof vapidKey !== 'string' || vapidKey.length === 0) {\\n      throw ERROR_FACTORY.create(\\\"invalid-vapid-key\\\"\\n      /* INVALID_VAPID_KEY */\\n      );\\n    }\\n\\n    this.vapidKey = vapidKey;\\n  };\\n\\n  WindowController.prototype.useServiceWorker = function (swRegistration) {\\n    if (!(swRegistration instanceof ServiceWorkerRegistration)) {\\n      throw ERROR_FACTORY.create(\\\"invalid-sw-registration\\\"\\n      /* INVALID_SW_REGISTRATION */\\n      );\\n    }\\n\\n    if (this.swRegistration) {\\n      throw ERROR_FACTORY.create(\\\"use-sw-after-get-token\\\"\\n      /* USE_SW_AFTER_GET_TOKEN */\\n      );\\n    }\\n\\n    this.swRegistration = swRegistration;\\n  };\\n  /**\\r\\n   * @param nextOrObserver An observer object or a function triggered on\\r\\n   * message.\\r\\n   * @return The unsubscribe function for the observer.\\r\\n   */\\n  // TODO: Simplify this to only accept a function and not an Observer.\\n\\n\\n  WindowController.prototype.onMessage = function (nextOrObserver) {\\n    var _this = this;\\n\\n    this.onMessageCallback = typeof nextOrObserver === 'function' ? nextOrObserver : nextOrObserver.next;\\n    return function () {\\n      _this.onMessageCallback = null;\\n    };\\n  };\\n\\n  WindowController.prototype.setBackgroundMessageHandler = function () {\\n    throw ERROR_FACTORY.create(\\\"only-available-in-sw\\\"\\n    /* AVAILABLE_IN_SW */\\n    );\\n  }; // Unimplemented\\n\\n\\n  WindowController.prototype.onTokenRefresh = function () {\\n    return function () {};\\n  };\\n  /**\\r\\n   * Creates or updates the default service worker registration.\\r\\n   * @return The service worker registration to be used for the push service.\\r\\n   */\\n\\n\\n  WindowController.prototype.getServiceWorkerRegistration = function () {\\n    return __awaiter(this, void 0, void 0, function () {\\n      var _a, e_1;\\n\\n      return __generator(this, function (_b) {\\n        switch (_b.label) {\\n          case 0:\\n            if (!!this.swRegistration) return [3\\n            /*break*/\\n            , 4];\\n            _b.label = 1;\\n\\n          case 1:\\n            _b.trys.push([1, 3,, 4]);\\n\\n            _a = this;\\n            return [4\\n            /*yield*/\\n            , navigator.serviceWorker.register(DEFAULT_SW_PATH, {\\n              scope: DEFAULT_SW_SCOPE\\n            })];\\n\\n          case 2:\\n            _a.swRegistration = _b.sent(); // The timing when browser updates sw when sw has an update is unreliable by my experiment.\\n            // It leads to version conflict when the SDK upgrades to a newer version in the main page, but\\n            // sw is stuck with the old version. For example, https://github.com/firebase/firebase-js-sdk/issues/2590\\n            // The following line reliably updates sw if there was an update.\\n\\n            this.swRegistration.update()[\\\"catch\\\"](function () {\\n              /* it is non blocking and we don't care if it failed */\\n            });\\n            return [3\\n            /*break*/\\n            , 4];\\n\\n          case 3:\\n            e_1 = _b.sent();\\n            throw ERROR_FACTORY.create(\\\"failed-service-worker-registration\\\"\\n            /* FAILED_DEFAULT_REGISTRATION */\\n            , {\\n              browserErrorMessage: e_1.message\\n            });\\n\\n          case 4:\\n            return [2\\n            /*return*/\\n            , this.swRegistration];\\n        }\\n      });\\n    });\\n  };\\n\\n  WindowController.prototype.messageEventListener = function (event) {\\n    var _a;\\n\\n    return __awaiter(this, void 0, void 0, function () {\\n      var _b, type, payload, data;\\n\\n      return __generator(this, function (_c) {\\n        switch (_c.label) {\\n          case 0:\\n            if (!((_a = event.data) === null || _a === void 0 ? void 0 : _a.firebaseMessaging)) {\\n              // Not a message from FCM\\n              return [2\\n              /*return*/\\n              ];\\n            }\\n\\n            _b = event.data.firebaseMessaging, type = _b.type, payload = _b.payload;\\n\\n            if (this.onMessageCallback && type === MessageType.PUSH_RECEIVED) {\\n              this.onMessageCallback(payload);\\n            }\\n\\n            data = payload.data;\\n            if (!(isConsoleMessage(data) && data[CONSOLE_CAMPAIGN_ANALYTICS_ENABLED] === '1')) return [3\\n            /*break*/\\n            , 2]; // Analytics is enabled on this message, so we should log it.\\n\\n            return [4\\n            /*yield*/\\n            , this.logEvent(type, data)];\\n\\n          case 1:\\n            // Analytics is enabled on this message, so we should log it.\\n            _c.sent();\\n\\n            _c.label = 2;\\n\\n          case 2:\\n            return [2\\n            /*return*/\\n            ];\\n        }\\n      });\\n    });\\n  };\\n\\n  WindowController.prototype.logEvent = function (messageType, data) {\\n    return __awaiter(this, void 0, void 0, function () {\\n      var eventType, analytics;\\n      return __generator(this, function (_a) {\\n        switch (_a.label) {\\n          case 0:\\n            eventType = getEventType(messageType);\\n            return [4\\n            /*yield*/\\n            , this.firebaseDependencies.analyticsProvider.get()];\\n\\n          case 1:\\n            analytics = _a.sent();\\n            analytics.logEvent(eventType, {\\n              /* eslint-disable camelcase */\\n              message_id: data[CONSOLE_CAMPAIGN_ID],\\n              message_name: data[CONSOLE_CAMPAIGN_NAME],\\n              message_time: data[CONSOLE_CAMPAIGN_TIME],\\n              message_device_time: Math.floor(Date.now() / 1000)\\n              /* eslint-enable camelcase */\\n\\n            });\\n            return [2\\n            /*return*/\\n            ];\\n        }\\n      });\\n    });\\n  };\\n\\n  return WindowController;\\n}();\\n\\nfunction getEventType(messageType) {\\n  switch (messageType) {\\n    case MessageType.NOTIFICATION_CLICKED:\\n      return 'notification_open';\\n\\n    case MessageType.PUSH_RECEIVED:\\n      return 'notification_foreground';\\n\\n    default:\\n      throw new Error();\\n  }\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2019 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n/** Returns a promise that resolves after given time passes. */\\n\\n\\nfunction sleep(ms) {\\n  return new Promise(function (resolve) {\\n    setTimeout(resolve, ms);\\n  });\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2017 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nvar SwController =\\n/** @class */\\nfunction () {\\n  function SwController(firebaseDependencies) {\\n    var _this = this;\\n\\n    this.firebaseDependencies = firebaseDependencies;\\n    this.vapidKey = null;\\n    this.bgMessageHandler = null;\\n    self.addEventListener('push', function (e) {\\n      e.waitUntil(_this.onPush(e));\\n    });\\n    self.addEventListener('pushsubscriptionchange', function (e) {\\n      e.waitUntil(_this.onSubChange(e));\\n    });\\n    self.addEventListener('notificationclick', function (e) {\\n      e.waitUntil(_this.onNotificationClick(e));\\n    });\\n  }\\n\\n  Object.defineProperty(SwController.prototype, \\\"app\\\", {\\n    get: function get() {\\n      return this.firebaseDependencies.app;\\n    },\\n    enumerable: true,\\n    configurable: true\\n  });\\n  /**\\r\\n   * Calling setBackgroundMessageHandler will opt in to some specific\\r\\n   * behaviours.\\r\\n   * 1.) If a notification doesn't need to be shown due to a window already\\r\\n   * being visible, then push messages will be sent to the page.\\r\\n   * 2.) If a notification needs to be shown, and the message contains no\\r\\n   * notification data this method will be called\\r\\n   * and the promise it returns will be passed to event.waitUntil.\\r\\n   * If you do not set this callback then all push messages will let and the\\r\\n   * developer can handle them in a their own 'push' event callback\\r\\n   *\\r\\n   * @param callback The callback to be called when a push message is received\\r\\n   * and a notification must be shown. The callback will be given the data from\\r\\n   * the push message.\\r\\n   */\\n\\n  SwController.prototype.setBackgroundMessageHandler = function (callback) {\\n    if (!callback || typeof callback !== 'function') {\\n      throw ERROR_FACTORY.create(\\\"invalid-bg-handler\\\"\\n      /* INVALID_BG_HANDLER */\\n      );\\n    }\\n\\n    this.bgMessageHandler = callback;\\n  }; // TODO: Remove getToken from SW Controller.\\n  // Calling this from an old SW can cause all kinds of trouble.\\n\\n\\n  SwController.prototype.getToken = function () {\\n    var _a, _b;\\n\\n    return __awaiter(this, void 0, void 0, function () {\\n      var tokenDetails;\\n      return __generator(this, function (_c) {\\n        switch (_c.label) {\\n          case 0:\\n            if (!!this.vapidKey) return [3\\n            /*break*/\\n            , 2];\\n            return [4\\n            /*yield*/\\n            , dbGet(this.firebaseDependencies)];\\n\\n          case 1:\\n            tokenDetails = _c.sent();\\n            this.vapidKey = (_b = (_a = tokenDetails === null || tokenDetails === void 0 ? void 0 : tokenDetails.subscriptionOptions) === null || _a === void 0 ? void 0 : _a.vapidKey) !== null && _b !== void 0 ? _b : DEFAULT_VAPID_KEY;\\n            _c.label = 2;\\n\\n          case 2:\\n            return [2\\n            /*return*/\\n            , getToken(this.firebaseDependencies, self.registration, this.vapidKey)];\\n        }\\n      });\\n    });\\n  }; // TODO: Remove deleteToken from SW Controller.\\n  // Calling this from an old SW can cause all kinds of trouble.\\n\\n\\n  SwController.prototype.deleteToken = function () {\\n    return deleteToken(this.firebaseDependencies, self.registration);\\n  };\\n\\n  SwController.prototype.requestPermission = function () {\\n    throw ERROR_FACTORY.create(\\\"only-available-in-window\\\"\\n    /* AVAILABLE_IN_WINDOW */\\n    );\\n  }; // TODO: Deprecate this and make VAPID key a parameter in getToken.\\n  // TODO: Remove this together with getToken from SW Controller.\\n\\n\\n  SwController.prototype.usePublicVapidKey = function (vapidKey) {\\n    if (this.vapidKey !== null) {\\n      throw ERROR_FACTORY.create(\\\"use-vapid-key-after-get-token\\\"\\n      /* USE_VAPID_KEY_AFTER_GET_TOKEN */\\n      );\\n    }\\n\\n    if (typeof vapidKey !== 'string' || vapidKey.length === 0) {\\n      throw ERROR_FACTORY.create(\\\"invalid-vapid-key\\\"\\n      /* INVALID_VAPID_KEY */\\n      );\\n    }\\n\\n    this.vapidKey = vapidKey;\\n  };\\n\\n  SwController.prototype.useServiceWorker = function () {\\n    throw ERROR_FACTORY.create(\\\"only-available-in-window\\\"\\n    /* AVAILABLE_IN_WINDOW */\\n    );\\n  };\\n\\n  SwController.prototype.onMessage = function () {\\n    throw ERROR_FACTORY.create(\\\"only-available-in-window\\\"\\n    /* AVAILABLE_IN_WINDOW */\\n    );\\n  };\\n\\n  SwController.prototype.onTokenRefresh = function () {\\n    throw ERROR_FACTORY.create(\\\"only-available-in-window\\\"\\n    /* AVAILABLE_IN_WINDOW */\\n    );\\n  };\\n  /**\\r\\n   * A handler for push events that shows notifications based on the content of\\r\\n   * the payload.\\r\\n   *\\r\\n   * The payload must be a JSON-encoded Object with a `notification` key. The\\r\\n   * value of the `notification` property will be used as the NotificationOptions\\r\\n   * object passed to showNotification. Additionally, the `title` property of the\\r\\n   * notification object will be used as the title.\\r\\n   *\\r\\n   * If there is no notification data in the payload then no notification will be\\r\\n   * shown.\\r\\n   */\\n\\n\\n  SwController.prototype.onPush = function (event) {\\n    return __awaiter(this, void 0, void 0, function () {\\n      var payload, clientList, notificationDetails;\\n      return __generator(this, function (_a) {\\n        switch (_a.label) {\\n          case 0:\\n            payload = getMessagePayload(event);\\n\\n            if (!payload) {\\n              return [2\\n              /*return*/\\n              ];\\n            }\\n\\n            return [4\\n            /*yield*/\\n            , getClientList()];\\n\\n          case 1:\\n            clientList = _a.sent();\\n\\n            if (hasVisibleClients(clientList)) {\\n              // App in foreground. Send to page.\\n              return [2\\n              /*return*/\\n              , sendMessageToWindowClients(clientList, payload)];\\n            }\\n\\n            notificationDetails = getNotificationData(payload);\\n            if (!notificationDetails) return [3\\n            /*break*/\\n            , 3];\\n            return [4\\n            /*yield*/\\n            , showNotification(notificationDetails)];\\n\\n          case 2:\\n            _a.sent();\\n\\n            return [3\\n            /*break*/\\n            , 5];\\n\\n          case 3:\\n            if (!this.bgMessageHandler) return [3\\n            /*break*/\\n            , 5];\\n            return [4\\n            /*yield*/\\n            , this.bgMessageHandler(payload)];\\n\\n          case 4:\\n            _a.sent();\\n\\n            _a.label = 5;\\n\\n          case 5:\\n            return [2\\n            /*return*/\\n            ];\\n        }\\n      });\\n    });\\n  };\\n\\n  SwController.prototype.onSubChange = function (event) {\\n    var _a, _b;\\n\\n    return __awaiter(this, void 0, void 0, function () {\\n      var newSubscription, tokenDetails;\\n      return __generator(this, function (_c) {\\n        switch (_c.label) {\\n          case 0:\\n            newSubscription = event.newSubscription;\\n            if (!!newSubscription) return [3\\n            /*break*/\\n            , 2]; // Subscription revoked, delete token\\n\\n            return [4\\n            /*yield*/\\n            , deleteToken(this.firebaseDependencies, self.registration)];\\n\\n          case 1:\\n            // Subscription revoked, delete token\\n            _c.sent();\\n\\n            return [2\\n            /*return*/\\n            ];\\n\\n          case 2:\\n            return [4\\n            /*yield*/\\n            , dbGet(this.firebaseDependencies)];\\n\\n          case 3:\\n            tokenDetails = _c.sent();\\n            return [4\\n            /*yield*/\\n            , deleteToken(this.firebaseDependencies, self.registration)];\\n\\n          case 4:\\n            _c.sent();\\n\\n            return [4\\n            /*yield*/\\n            , getToken(this.firebaseDependencies, self.registration, (_b = (_a = tokenDetails === null || tokenDetails === void 0 ? void 0 : tokenDetails.subscriptionOptions) === null || _a === void 0 ? void 0 : _a.vapidKey) !== null && _b !== void 0 ? _b : DEFAULT_VAPID_KEY)];\\n\\n          case 5:\\n            _c.sent();\\n\\n            return [2\\n            /*return*/\\n            ];\\n        }\\n      });\\n    });\\n  };\\n\\n  SwController.prototype.onNotificationClick = function (event) {\\n    var _a, _b;\\n\\n    return __awaiter(this, void 0, void 0, function () {\\n      var payload, link, client, message;\\n      return __generator(this, function (_c) {\\n        switch (_c.label) {\\n          case 0:\\n            payload = (_b = (_a = event.notification) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b[FCM_MSG];\\n\\n            if (!payload) {\\n              // Not an FCM notification, do nothing.\\n              return [2\\n              /*return*/\\n              ];\\n            } else if (event.action) {\\n              // User clicked on an action button.\\n              // This will allow devs to act on action button clicks by using a custom\\n              // onNotificationClick listener that they define.\\n              return [2\\n              /*return*/\\n              ];\\n            } // Prevent other listeners from receiving the event\\n\\n\\n            event.stopImmediatePropagation();\\n            event.notification.close();\\n            link = getLink(payload);\\n\\n            if (!link) {\\n              return [2\\n              /*return*/\\n              ];\\n            }\\n\\n            return [4\\n            /*yield*/\\n            , getWindowClient(link)];\\n\\n          case 1:\\n            client = _c.sent();\\n            if (!!client) return [3\\n            /*break*/\\n            , 4];\\n            return [4\\n            /*yield*/\\n            , self.clients.openWindow(link)];\\n\\n          case 2:\\n            // Unable to find window client so need to open one.\\n            // This also focuses the opened client.\\n            client = _c.sent(); // Wait three seconds for the client to initialize and set up the message\\n            // handler so that it can receive the message.\\n\\n            return [4\\n            /*yield*/\\n            , sleep(3000)];\\n\\n          case 3:\\n            // Wait three seconds for the client to initialize and set up the message\\n            // handler so that it can receive the message.\\n            _c.sent();\\n\\n            return [3\\n            /*break*/\\n            , 6];\\n\\n          case 4:\\n            return [4\\n            /*yield*/\\n            , client.focus()];\\n\\n          case 5:\\n            client = _c.sent();\\n            _c.label = 6;\\n\\n          case 6:\\n            if (!client) {\\n              // Window Client will not be returned if it's for a third party origin.\\n              return [2\\n              /*return*/\\n              ];\\n            }\\n\\n            message = createNewMessage(MessageType.NOTIFICATION_CLICKED, payload);\\n            return [2\\n            /*return*/\\n            , client.postMessage(message)];\\n        }\\n      });\\n    });\\n  };\\n\\n  return SwController;\\n}();\\n\\nfunction getMessagePayload(_a) {\\n  var data = _a.data;\\n\\n  if (!data) {\\n    return null;\\n  }\\n\\n  try {\\n    return data.json();\\n  } catch (err) {\\n    // Not JSON so not an FCM message.\\n    return null;\\n  }\\n}\\n\\nfunction getNotificationData(payload) {\\n  var _a;\\n\\n  if (!payload || typeof payload.notification !== 'object') {\\n    return;\\n  }\\n\\n  var notificationInformation = __assign({}, payload.notification); // Put the message payload under FCM_MSG name so we can identify the\\n  // notification as being an FCM notification vs a notification from\\n  // somewhere else (i.e. normal web push or developer generated\\n  // notification).\\n\\n\\n  notificationInformation.data = __assign(__assign({}, payload.notification.data), (_a = {}, _a[FCM_MSG] = payload, _a));\\n  return notificationInformation;\\n}\\n/**\\r\\n * @param url The URL to look for when focusing a client.\\r\\n * @return Returns an existing window client or a newly opened WindowClient.\\r\\n */\\n\\n\\nfunction getWindowClient(url) {\\n  return __awaiter(this, void 0, void 0, function () {\\n    var parsedURL, clientList, clientList_1, clientList_1_1, client, parsedClientUrl;\\n\\n    var e_1, _a;\\n\\n    return __generator(this, function (_b) {\\n      switch (_b.label) {\\n        case 0:\\n          parsedURL = new URL(url, self.location.href).href;\\n          return [4\\n          /*yield*/\\n          , getClientList()];\\n\\n        case 1:\\n          clientList = _b.sent();\\n\\n          try {\\n            for (clientList_1 = __values(clientList), clientList_1_1 = clientList_1.next(); !clientList_1_1.done; clientList_1_1 = clientList_1.next()) {\\n              client = clientList_1_1.value;\\n              parsedClientUrl = new URL(client.url, self.location.href).href;\\n\\n              if (parsedClientUrl === parsedURL) {\\n                return [2\\n                /*return*/\\n                , client];\\n              }\\n            }\\n          } catch (e_1_1) {\\n            e_1 = {\\n              error: e_1_1\\n            };\\n          } finally {\\n            try {\\n              if (clientList_1_1 && !clientList_1_1.done && (_a = clientList_1[\\\"return\\\"])) _a.call(clientList_1);\\n            } finally {\\n              if (e_1) throw e_1.error;\\n            }\\n          }\\n\\n          return [2\\n          /*return*/\\n          , null];\\n      }\\n    });\\n  });\\n}\\n/**\\r\\n * @returns If there is currently a visible WindowClient, this method will\\r\\n * resolve to true, otherwise false.\\r\\n */\\n\\n\\nfunction hasVisibleClients(clientList) {\\n  return clientList.some(function (client) {\\n    return client.visibilityState === 'visible' && // Ignore chrome-extension clients as that matches the background pages\\n    // of extensions, which are always considered visible for some reason.\\n    !client.url.startsWith('chrome-extension://');\\n  });\\n}\\n/**\\r\\n * @param payload The data from the push event that should be sent to all\\r\\n * available pages.\\r\\n * @returns Returns a promise that resolves once the message has been sent to\\r\\n * all WindowClients.\\r\\n */\\n\\n\\nfunction sendMessageToWindowClients(clientList, payload) {\\n  var e_2, _a;\\n\\n  var message = createNewMessage(MessageType.PUSH_RECEIVED, payload);\\n\\n  try {\\n    for (var clientList_2 = __values(clientList), clientList_2_1 = clientList_2.next(); !clientList_2_1.done; clientList_2_1 = clientList_2.next()) {\\n      var client = clientList_2_1.value;\\n      client.postMessage(message);\\n    }\\n  } catch (e_2_1) {\\n    e_2 = {\\n      error: e_2_1\\n    };\\n  } finally {\\n    try {\\n      if (clientList_2_1 && !clientList_2_1.done && (_a = clientList_2[\\\"return\\\"])) _a.call(clientList_2);\\n    } finally {\\n      if (e_2) throw e_2.error;\\n    }\\n  }\\n}\\n\\nfunction getClientList() {\\n  return self.clients.matchAll({\\n    type: 'window',\\n    includeUncontrolled: true // TS doesn't know that \\\"type: 'window'\\\" means it'll return WindowClient[]\\n\\n  });\\n}\\n\\nfunction createNewMessage(type, payload) {\\n  return {\\n    firebaseMessaging: {\\n      type: type,\\n      payload: payload\\n    }\\n  };\\n}\\n\\nfunction showNotification(details) {\\n  var _a;\\n\\n  var title = (_a = details.title) !== null && _a !== void 0 ? _a : '';\\n  var actions = details.actions;\\n  var maxActions = Notification.maxActions;\\n\\n  if (actions && maxActions && actions.length > maxActions) {\\n    console.warn(\\\"This browser only supports \\\" + maxActions + \\\" actions. The remaining actions will not be displayed.\\\");\\n  }\\n\\n  return self.registration.showNotification(title, details);\\n}\\n\\nfunction getLink(payload) {\\n  var _a, _b, _c; // eslint-disable-next-line camelcase\\n\\n\\n  var link = (_b = (_a = payload.fcmOptions) === null || _a === void 0 ? void 0 : _a.link) !== null && _b !== void 0 ? _b : (_c = payload.notification) === null || _c === void 0 ? void 0 : _c.click_action;\\n\\n  if (link) {\\n    return link;\\n  }\\n\\n  if (isConsoleMessage(payload.data)) {\\n    // Notification created in the Firebase Console. Redirect to origin.\\n    return self.location.origin;\\n  } else {\\n    return null;\\n  }\\n}\\n/**\\r\\n * @license\\r\\n * Copyright 2017 Google Inc.\\r\\n *\\r\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n * you may not use this file except in compliance with the License.\\r\\n * You may obtain a copy of the License at\\r\\n *\\r\\n *   http://www.apache.org/licenses/LICENSE-2.0\\r\\n *\\r\\n * Unless required by applicable law or agreed to in writing, software\\r\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n * See the License for the specific language governing permissions and\\r\\n * limitations under the License.\\r\\n */\\n\\n\\nvar MESSAGING_NAME = 'messaging';\\n\\nfunction factoryMethod(container) {\\n  // Dependencies.\\n  var app = container.getProvider('app').getImmediate();\\n  var appConfig = extractAppConfig(app);\\n  var installations = container.getProvider('installations').getImmediate();\\n  var analyticsProvider = container.getProvider('analytics-internal');\\n  var firebaseDependencies = {\\n    app: app,\\n    appConfig: appConfig,\\n    installations: installations,\\n    analyticsProvider: analyticsProvider\\n  };\\n\\n  if (!isSupported()) {\\n    throw ERROR_FACTORY.create(\\\"unsupported-browser\\\"\\n    /* UNSUPPORTED_BROWSER */\\n    );\\n  }\\n\\n  if (self && 'ServiceWorkerGlobalScope' in self) {\\n    // Running in ServiceWorker context\\n    return new SwController(firebaseDependencies);\\n  } else {\\n    // Assume we are in the window context.\\n    return new WindowController(firebaseDependencies);\\n  }\\n}\\n\\nvar NAMESPACE_EXPORTS = {\\n  isSupported: isSupported\\n};\\nfirebase.INTERNAL.registerComponent(new Component(MESSAGING_NAME, factoryMethod, \\\"PUBLIC\\\"\\n/* PUBLIC */\\n).setServiceProps(NAMESPACE_EXPORTS));\\n\\nfunction isSupported() {\\n  if (self && 'ServiceWorkerGlobalScope' in self) {\\n    // Running in ServiceWorker context\\n    return isSWControllerSupported();\\n  } else {\\n    // Assume we are in the window context.\\n    return isWindowControllerSupported();\\n  }\\n}\\n/**\\r\\n * Checks to see if the required APIs exist.\\r\\n */\\n\\n\\nfunction isWindowControllerSupported() {\\n  return 'indexedDB' in window && indexedDB !== null && navigator.cookieEnabled && 'serviceWorker' in navigator && 'PushManager' in window && 'Notification' in window && 'fetch' in window && ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') && PushSubscription.prototype.hasOwnProperty('getKey');\\n}\\n/**\\r\\n * Checks to see if the required APIs exist within SW Context.\\r\\n */\\n\\n\\nfunction isSWControllerSupported() {\\n  return 'indexedDB' in self && indexedDB !== null && 'PushManager' in self && 'Notification' in self && ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') && PushSubscription.prototype.hasOwnProperty('getKey');\\n}\",\"require(\\\"core-js/modules/es6.regexp.replace\\\");\\n\\nrequire(\\\"core-js/modules/es6.object.define-property\\\");\\n\\nrequire(\\\"core-js/modules/es6.array.for-each\\\");\\n\\nrequire(\\\"core-js/modules/es6.promise\\\");\\n\\nrequire(\\\"core-js/modules/es6.object.to-string\\\");\\n\\n(function (global, factory) {\\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) : typeof define === 'function' && define.amd ? define(['exports'], factory) : (global = global || self, factory(global.idb = {}));\\n})(this, function (exports) {\\n  'use strict';\\n\\n  function toArray(arr) {\\n    return Array.prototype.slice.call(arr);\\n  }\\n\\n  function promisifyRequest(request) {\\n    return new Promise(function (resolve, reject) {\\n      request.onsuccess = function () {\\n        resolve(request.result);\\n      };\\n\\n      request.onerror = function () {\\n        reject(request.error);\\n      };\\n    });\\n  }\\n\\n  function promisifyRequestCall(obj, method, args) {\\n    var request;\\n    var p = new Promise(function (resolve, reject) {\\n      request = obj[method].apply(obj, args);\\n      promisifyRequest(request).then(resolve, reject);\\n    });\\n    p.request = request;\\n    return p;\\n  }\\n\\n  function promisifyCursorRequestCall(obj, method, args) {\\n    var p = promisifyRequestCall(obj, method, args);\\n    return p.then(function (value) {\\n      if (!value) return;\\n      return new Cursor(value, p.request);\\n    });\\n  }\\n\\n  function proxyProperties(ProxyClass, targetProp, properties) {\\n    properties.forEach(function (prop) {\\n      Object.defineProperty(ProxyClass.prototype, prop, {\\n        get: function get() {\\n          return this[targetProp][prop];\\n        },\\n        set: function set(val) {\\n          this[targetProp][prop] = val;\\n        }\\n      });\\n    });\\n  }\\n\\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\\n    properties.forEach(function (prop) {\\n      if (!(prop in Constructor.prototype)) return;\\n\\n      ProxyClass.prototype[prop] = function () {\\n        return promisifyRequestCall(this[targetProp], prop, arguments);\\n      };\\n    });\\n  }\\n\\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\\n    properties.forEach(function (prop) {\\n      if (!(prop in Constructor.prototype)) return;\\n\\n      ProxyClass.prototype[prop] = function () {\\n        return this[targetProp][prop].apply(this[targetProp], arguments);\\n      };\\n    });\\n  }\\n\\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\\n    properties.forEach(function (prop) {\\n      if (!(prop in Constructor.prototype)) return;\\n\\n      ProxyClass.prototype[prop] = function () {\\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\\n      };\\n    });\\n  }\\n\\n  function Index(index) {\\n    this._index = index;\\n  }\\n\\n  proxyProperties(Index, '_index', ['name', 'keyPath', 'multiEntry', 'unique']);\\n  proxyRequestMethods(Index, '_index', IDBIndex, ['get', 'getKey', 'getAll', 'getAllKeys', 'count']);\\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, ['openCursor', 'openKeyCursor']);\\n\\n  function Cursor(cursor, request) {\\n    this._cursor = cursor;\\n    this._request = request;\\n  }\\n\\n  proxyProperties(Cursor, '_cursor', ['direction', 'key', 'primaryKey', 'value']);\\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, ['update', 'delete']); // proxy 'next' methods\\n\\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function (methodName) {\\n    if (!(methodName in IDBCursor.prototype)) return;\\n\\n    Cursor.prototype[methodName] = function () {\\n      var cursor = this;\\n      var args = arguments;\\n      return Promise.resolve().then(function () {\\n        cursor._cursor[methodName].apply(cursor._cursor, args);\\n\\n        return promisifyRequest(cursor._request).then(function (value) {\\n          if (!value) return;\\n          return new Cursor(value, cursor._request);\\n        });\\n      });\\n    };\\n  });\\n\\n  function ObjectStore(store) {\\n    this._store = store;\\n  }\\n\\n  ObjectStore.prototype.createIndex = function () {\\n    return new Index(this._store.createIndex.apply(this._store, arguments));\\n  };\\n\\n  ObjectStore.prototype.index = function () {\\n    return new Index(this._store.index.apply(this._store, arguments));\\n  };\\n\\n  proxyProperties(ObjectStore, '_store', ['name', 'keyPath', 'indexNames', 'autoIncrement']);\\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, ['put', 'add', 'delete', 'clear', 'get', 'getAll', 'getKey', 'getAllKeys', 'count']);\\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, ['openCursor', 'openKeyCursor']);\\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, ['deleteIndex']);\\n\\n  function Transaction(idbTransaction) {\\n    this._tx = idbTransaction;\\n    this.complete = new Promise(function (resolve, reject) {\\n      idbTransaction.oncomplete = function () {\\n        resolve();\\n      };\\n\\n      idbTransaction.onerror = function () {\\n        reject(idbTransaction.error);\\n      };\\n\\n      idbTransaction.onabort = function () {\\n        reject(idbTransaction.error);\\n      };\\n    });\\n  }\\n\\n  Transaction.prototype.objectStore = function () {\\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\\n  };\\n\\n  proxyProperties(Transaction, '_tx', ['objectStoreNames', 'mode']);\\n  proxyMethods(Transaction, '_tx', IDBTransaction, ['abort']);\\n\\n  function UpgradeDB(db, oldVersion, transaction) {\\n    this._db = db;\\n    this.oldVersion = oldVersion;\\n    this.transaction = new Transaction(transaction);\\n  }\\n\\n  UpgradeDB.prototype.createObjectStore = function () {\\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\\n  };\\n\\n  proxyProperties(UpgradeDB, '_db', ['name', 'version', 'objectStoreNames']);\\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, ['deleteObjectStore', 'close']);\\n\\n  function DB(db) {\\n    this._db = db;\\n  }\\n\\n  DB.prototype.transaction = function () {\\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\\n  };\\n\\n  proxyProperties(DB, '_db', ['name', 'version', 'objectStoreNames']);\\n  proxyMethods(DB, '_db', IDBDatabase, ['close']); // Add cursor iterators\\n  // TODO: remove this once browsers do the right thing with promises\\n\\n  ['openCursor', 'openKeyCursor'].forEach(function (funcName) {\\n    [ObjectStore, Index].forEach(function (Constructor) {\\n      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.\\n      if (!(funcName in Constructor.prototype)) return;\\n\\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function () {\\n        var args = toArray(arguments);\\n        var callback = args[args.length - 1];\\n        var nativeObject = this._store || this._index;\\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\\n\\n        request.onsuccess = function () {\\n          callback(request.result);\\n        };\\n      };\\n    });\\n  }); // polyfill getAll\\n\\n  [Index, ObjectStore].forEach(function (Constructor) {\\n    if (Constructor.prototype.getAll) return;\\n\\n    Constructor.prototype.getAll = function (query, count) {\\n      var instance = this;\\n      var items = [];\\n      return new Promise(function (resolve) {\\n        instance.iterateCursor(query, function (cursor) {\\n          if (!cursor) {\\n            resolve(items);\\n            return;\\n          }\\n\\n          items.push(cursor.value);\\n\\n          if (count !== undefined && items.length == count) {\\n            resolve(items);\\n            return;\\n          }\\n\\n          cursor[\\\"continue\\\"]();\\n        });\\n      });\\n    };\\n  });\\n\\n  function openDb(name, version, upgradeCallback) {\\n    var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\\n    var request = p.request;\\n\\n    if (request) {\\n      request.onupgradeneeded = function (event) {\\n        if (upgradeCallback) {\\n          upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\\n        }\\n      };\\n    }\\n\\n    return p.then(function (db) {\\n      return new DB(db);\\n    });\\n  }\\n\\n  function deleteDb(name) {\\n    return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\\n  }\\n\\n  exports.openDb = openDb;\\n  exports.deleteDb = deleteDb;\\n  Object.defineProperty(exports, '__esModule', {\\n    value: true\\n  });\\n});\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1182:function(e,t,n){\"use strict\";var r=n(2),i=n(18),o=n(132),a=\"\".startsWith;r(r.P+r.F*n(133)(\"startsWith\"),\"String\",{startsWith:function(e){var t=o(this,e,\"startsWith\"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},1186:function(e,t,n){\"use strict\";n.r(t);n(72),n(1182),n(174),n(51),n(3),n(1),n(64),n(175),n(176),n(29),n(15),n(178),n(24);var r,i=n(476),o=n.n(i),a=(n(126),n(23),n(20),n(120),n(124),n(381),n(477)),s=n(414),c=n(433),u=n(555),l=\"@firebase/installations\",f=\"0.4.6\",d=1e4,p=\"w:\"+f,h=\"FIS_v2\",b=\"https://firebaseinstallations.googleapis.com/v1\",g=36e5,v=((r={})[\"missing-app-config-values\"]='Missing App configuration value: \"{$valueName}\"',r[\"not-registered\"]=\"Firebase Installation is not registered.\",r[\"installation-not-found\"]=\"Firebase Installation not found.\",r[\"request-failed\"]='{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"',r[\"app-offline\"]=\"Could not process request. Application offline.\",r[\"delete-pending-registration\"]=\"Can't delete installation while there is a pending registration request.\",r),_=new c.ErrorFactory(\"installations\",\"Installations\",v);function w(e){return e instanceof c.FirebaseError&&e.code.includes(\"request-failed\")}function y(e){var t=e.projectId;return b+\"/projects/\"+t+\"/installations\"}function m(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace(\"s\",\"000\"))),creationTime:Date.now()};var t}function j(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,_.create(\"request-failed\",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function O(e){var t=e.apiKey;return new Headers({\"Content-Type\":\"application/json\",Accept:\"application/json\",\"x-goog-api-key\":t})}function k(e,t){var n=t.refreshToken,r=O(e);return r.append(\"Authorization\",function(e){return h+\" \"+e}(n)),r}function S(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}})})}function I(e,t){var n=t.fid;return Object(s.__awaiter)(this,void 0,void 0,function(){var t,r,i,o,a,c;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return t=y(e),r=O(e),i={fid:n,authVersion:h,appId:e.appId,sdkVersion:p},o={method:\"POST\",headers:r,body:JSON.stringify(i)},[4,S(function(){return fetch(t,o)})];case 1:return(a=s.sent()).ok?[4,a.json()]:[3,3];case 2:return c=s.sent(),[2,{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:m(c.authToken)}];case 3:return[4,j(\"Create Installation\",a)];case 4:throw s.sent()}})})}function C(e){return new Promise(function(t){setTimeout(t,e)})}var T=/^[cdef][\\w-]{21}$/,D=\"\";function P(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(s.__spread)(t))).replace(/\\+/g,\"-\").replace(/\\//g,\"_\")).substr(0,22);var t}(e);return T.test(t)?t:D}catch(n){return D}}function K(e){return e.appName+\"!\"+e.appId}var E=new Map;function x(e,t){var n=K(e);N(n,t),function(e,t){var n=A();n&&n.postMessage({key:e,fid:t});q()}(n,t)}function N(e,t){var n,r,i=E.get(e);if(i)try{for(var o=Object(s.__values)(i),a=o.next();!a.done;a=o.next()){(0,a.value)(t)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var M=null;function A(){return!M&&\"BroadcastChannel\"in self&&((M=new BroadcastChannel(\"[Firebase] FID Change\")).onmessage=function(e){N(e.data.key,e.data.fid)}),M}function q(){0===E.size&&M&&(M.close(),M=null)}var B,W,R=\"firebase-installations-database\",L=1,V=\"firebase-installations-store\",F=null;function H(){return F||(F=Object(u.openDb)(R,L,function(e){switch(e.oldVersion){case 0:e.createObjectStore(V)}})),F}function U(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return n=K(e),[4,H()];case 1:return r=s.sent(),i=r.transaction(V,\"readwrite\"),[4,(o=i.objectStore(V)).get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||x(e,t.fid),[2,t]}})})}function $(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return t=K(e),[4,H()];case 1:return n=i.sent(),[4,(r=n.transaction(V,\"readwrite\")).objectStore(V).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function J(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,c;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return n=K(e),[4,H()];case 1:return r=s.sent(),i=r.transaction(V,\"readwrite\"),[4,(o=i.objectStore(V)).get(n)];case 2:return a=s.sent(),void 0!==(c=t(a))?[3,4]:[4,o.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,o.put(c,n)];case 5:s.sent(),s.label=6;case 6:return[4,i.complete];case 7:return s.sent(),!c||a&&a.fid===c.fid||x(e,c.fid),[2,c]}})})}function G(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,J(e,function(n){var r=function(e){return X(e||{fid:P(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(_.create(\"app-offline\"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,I(e,t)];case 1:return n=i.sent(),[2,U(e,n)];case 2:return w(r=i.sent())&&409===r.serverCode?[4,$(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,U(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:z(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry})];case 1:return(n=i.sent()).fid!==D?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function z(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return[4,Q(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,C(100)];case 3:return o.sent(),[4,Q(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,G(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}})})}function Q(e){return J(e,function(e){if(!e)throw _.create(\"installation-not-found\");return X(e)})}function X(e){return 1===(t=e).registrationStatus&&t.registrationTime+d<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Y(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(s.__awaiter)(this,void 0,void 0,function(){var e,i,o,a,c,u,l;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return e=function(e,t){var n=t.fid;return y(e)+\"/\"+n+\"/authTokens:generate\"}(n,t),i=k(n,t),(o=r.getImmediate({optional:!0}))&&i.append(\"x-firebase-client\",o.getPlatformInfoString()),a={installation:{sdkVersion:p}},c={method:\"POST\",headers:i,body:JSON.stringify(a)},[4,S(function(){return fetch(e,c)})];case 1:return(u=s.sent()).ok?[4,u.json()]:[3,3];case 2:return l=s.sent(),[2,m(l)];case 3:return[4,j(\"Generate Auth Token\",u)];case 4:throw s.sent()}})})}function Z(e,t){return void 0===t&&(t=!1),Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return[4,J(e.appConfig,function(r){if(!te(r))throw _.create(\"not-registered\");var i,o=r.authToken;if(t||2!==(i=o).requestStatus||function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+g}(i)){if(1===o.requestStatus)return n=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,ee(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,C(100)];case 3:return i.sent(),[4,ee(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Z(e,t)]:[2,r]}})})}(e,t),r;if(!navigator.onLine)throw _.create(\"app-offline\");var a=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(s.__assign)(Object(s.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Y(e,t)];case 1:return n=o.sent(),i=Object(s.__assign)(Object(s.__assign)({},t),{authToken:n}),[4,U(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!w(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,$(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(s.__assign)(Object(s.__assign)({},t),{authToken:{requestStatus:0}}),[4,U(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(e,a),a}return r})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function ee(e){return J(e,function(e){if(!te(e))throw _.create(\"not-registered\");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+d<Date.now()?Object(s.__assign)(Object(s.__assign)({},e),{authToken:{requestStatus:0}}):e})}function te(e){return void 0!==e&&2===e.registrationStatus}function ne(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,G(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function re(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(s.__generator)(this,function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return y(e)+\"/\"+n}(e,t),r=k(e,t),i={method:\"DELETE\",headers:r},[4,S(function(){return fetch(n,i)})];case 1:return(o=a.sent()).ok?[3,3]:[4,j(\"Delete Installation\",o)];case 2:throw a.sent();case 3:return[2]}})})}function ie(e,t){var n=e.appConfig;return function(e,t){A();var n=K(e),r=E.get(n);r||(r=new Set,E.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=K(e),r=E.get(n);r&&(r.delete(t),0===r.size&&E.delete(n),q())}(n,t)}}function oe(e){return _.create(\"missing-app-config-values\",{valueName:e})}(B=o.a).INTERNAL.registerComponent(new a.Component(\"installations\",function(e){var t=e.getProvider(\"app\").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw oe(\"App Configuration\");if(!e.name)throw oe(\"App Name\");try{for(var r=Object(s.__values)([\"projectId\",\"apiKey\",\"appId\"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw oe(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider(\"platform-logger\")};return{app:t,getId:function(){return function(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,G(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):Z(e).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,ne(e.appConfig)];case 1:return n.sent(),[4,Z(e,t)];case 2:return[2,n.sent().token]}})})}(n,e)},delete:function(){return function(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(s.__generator)(this,function(r){switch(r.label){case 0:return[4,J(t=e.appConfig,function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw _.create(\"delete-pending-registration\");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw _.create(\"app-offline\");case 3:return[4,re(t,n)];case 4:return r.sent(),[4,$(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(e){return ie(n,e)}}},\"PUBLIC\")),B.registerVersion(l,f);var ae=((W={})[\"missing-app-config-values\"]='Missing App configuration value: \"{$valueName}\"',W[\"only-available-in-window\"]=\"This method is available in a Window context.\",W[\"only-available-in-sw\"]=\"This method is available in a service worker context.\",W[\"permission-default\"]=\"The notification permission was not granted and dismissed instead.\",W[\"permission-blocked\"]=\"The notification permission was not granted and blocked instead.\",W[\"unsupported-browser\"]=\"This browser doesn't support the API's required to use the firebase SDK.\",W[\"failed-service-worker-registration\"]=\"We are unable to register the default service worker. {$browserErrorMessage}\",W[\"token-subscribe-failed\"]=\"A problem occured while subscribing the user to FCM: {$errorInfo}\",W[\"token-subscribe-no-token\"]=\"FCM returned no token when subscribing the user to push.\",W[\"token-unsubscribe-failed\"]=\"A problem occured while unsubscribing the user from FCM: {$errorInfo}\",W[\"token-update-failed\"]=\"A problem occured while updating the user from FCM: {$errorInfo}\",W[\"token-update-no-token\"]=\"FCM returned no token when updating the user to push.\",W[\"use-sw-after-get-token\"]=\"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.\",W[\"invalid-sw-registration\"]=\"The input to useServiceWorker() must be a ServiceWorkerRegistration.\",W[\"invalid-bg-handler\"]=\"The input to setBackgroundMessageHandler() must be a function.\",W[\"invalid-vapid-key\"]=\"The public VAPID key must be a string.\",W[\"use-vapid-key-after-get-token\"]=\"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.\",W),se=new c.ErrorFactory(\"messaging\",\"Messaging\",ae);function ce(e){return se.create(\"missing-app-config-values\",{valueName:e})}function ue(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(s.__spread)(t))).replace(/=/g,\"\").replace(/\\+/g,\"-\").replace(/\\//g,\"_\")}var le=\"fcm_token_details_db\",fe=5,de=\"fcm_token_object_Store\";function pe(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n,r=this;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return\"databases\"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=i.sent(),!t.map(function(e){return e.name}).includes(le))return[2,null];i.label=2;case 2:return n=null,[4,Object(u.openDb)(le,fe,function(t){return Object(s.__awaiter)(r,void 0,void 0,function(){var r,i,o,a;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(de)?[4,(r=t.transaction.objectStore(de)).index(\"fcmSenderId\").get(e)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:\"string\"==typeof o.vapidKey?o.vapidKey:ue(o.vapidKey)}}}else 3===t.oldVersion?n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:ue(o.auth),p256dh:ue(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:ue(o.vapidKey)}}:4===t.oldVersion&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:ue(o.auth),p256dh:ue(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:ue(o.vapidKey)}});return[2]}})})})];case 3:return i.sent().close(),[4,Object(u.deleteDb)(le)];case 4:return i.sent(),[4,Object(u.deleteDb)(\"fcm_vapid_details_db\")];case 5:return i.sent(),[4,Object(u.deleteDb)(\"undefined\")];case 6:return i.sent(),[2,he(n)?n:null]}})})}function he(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return\"number\"==typeof e.createTime&&e.createTime>0&&\"string\"==typeof e.token&&e.token.length>0&&\"string\"==typeof t.auth&&t.auth.length>0&&\"string\"==typeof t.p256dh&&t.p256dh.length>0&&\"string\"==typeof t.endpoint&&t.endpoint.length>0&&\"string\"==typeof t.swScope&&t.swScope.length>0&&\"string\"==typeof t.vapidKey&&t.vapidKey.length>0}var be=\"firebase-messaging-database\",ge=1,ve=\"firebase-messaging-store\",_e=null;function we(){return _e||(_e=Object(u.openDb)(be,ge,function(e){switch(e.oldVersion){case 0:e.createObjectStore(ve)}})),_e}function ye(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return t=Oe(e),[4,we()];case 1:return[4,i.sent().transaction(ve).objectStore(ve).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,pe(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,me(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function me(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return n=Oe(e),[4,we()];case 1:return r=o.sent(),[4,(i=r.transaction(ve,\"readwrite\")).objectStore(ve).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}})})}function je(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return t=Oe(e),[4,we()];case 1:return n=i.sent(),[4,(r=n.transaction(ve,\"readwrite\")).objectStore(ve).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Oe(e){return e.appConfig.appId}var ke=\"BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4\",Se=\"https://fcmregistrations.googleapis.com/v1\",Ie=\"FCM_MSG\",Ce=\"google.c.a.c_id\";function Te(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,c;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return[4,Ee(e)];case 1:n=s.sent(),r=xe(t),i={method:\"POST\",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Ke(e.appConfig),i)];case 3:return[4,s.sent().json()];case 4:return o=s.sent(),[3,6];case 5:throw a=s.sent(),se.create(\"token-subscribe-failed\",{errorInfo:a});case 6:if(o.error)throw c=o.error.message,se.create(\"token-subscribe-failed\",{errorInfo:c});if(!o.token)throw se.create(\"token-subscribe-no-token\");return[2,o.token]}})})}function De(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,c;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return[4,Ee(e)];case 1:n=s.sent(),r=xe(t.subscriptionOptions),i={method:\"PATCH\",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Ke(e.appConfig)+\"/\"+t.token,i)];case 3:return[4,s.sent().json()];case 4:return o=s.sent(),[3,6];case 5:throw a=s.sent(),se.create(\"token-update-failed\",{errorInfo:a});case 6:if(o.error)throw c=o.error.message,se.create(\"token-update-failed\",{errorInfo:c});if(!o.token)throw se.create(\"token-update-no-token\");return[2,o.token]}})})}function Pe(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return[4,Ee(e)];case 1:n=s.sent(),r={method:\"DELETE\",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Ke(e.appConfig)+\"/\"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,se.create(\"token-unsubscribe-failed\",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),se.create(\"token-unsubscribe-failed\",{errorInfo:a});case 6:return[2]}})})}function Ke(e){var t=e.projectId;return Se+\"/projects/\"+t+\"/registrations\"}function Ee(e){var t=e.appConfig,n=e.installations;return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({\"Content-Type\":\"application/json\",Accept:\"application/json\",\"x-goog-api-key\":t.apiKey,\"x-goog-firebase-installations-auth\":\"FIS \"+e})]}})})}function xe(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==ke&&(o.web.applicationPubKey=i),o}var Ne,Me=6048e5;function Ae(e,t,n){return Object(s.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return Object(s.__generator)(this,function(s){switch(s.label){case 0:if(\"granted\"!==Notification.permission)throw se.create(\"permission-blocked\");return[4,Re(t,n)];case 1:return r=s.sent(),[4,ye(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:ue(r.getKey(\"auth\")),p256dh:ue(r.getKey(\"p256dh\"))},i?[3,3]:[2,We(e,o)];case 3:if(c=i.subscriptionOptions,l=(u=o).vapidKey===c.vapidKey,f=u.endpoint===c.endpoint,d=u.auth===c.auth,p=u.p256dh===c.p256dh,l&&f&&d&&p)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,Pe(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,We(e,o)];case 8:return Date.now()>=i.createTime+Me?[2,Be({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}var c,u,l,f,d,p})})}function qe(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,ye(e)];case 1:return(n=i.sent())?[4,Pe(e,n.token)]:[3,4];case 2:return i.sent(),[4,je(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function Be(e,t,n){return Object(s.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(s.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,De(t,e)];case 1:return r=a.sent(),i=Object(s.__assign)({token:r,createTime:Date.now()},e),[4,me(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,qe(t,n)];case 4:throw a.sent(),o;case 5:return[2]}})})}function We(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,Te(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,me(e,r)];case 2:return i.sent(),[2,r.token]}})})}function Re(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n;return Object(s.__generator)(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})]}})})}function Le(e){return\"object\"==typeof e&&!!e&&Ce in e}!function(e){e.PUSH_RECEIVED=\"push-received\",e.NOTIFICATION_CLICKED=\"notification-clicked\"}(Ne||(Ne={}));var Ve=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener(\"message\",function(e){return t.messageEventListener(e)})}return Object.defineProperty(e.prototype,\"app\",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),e.prototype.getToken=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(t){switch(t.label){case 0:return this.vapidKey||(this.vapidKey=ke),[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),\"default\"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:t.sent(),t.label=3;case 3:if(\"granted\"!==Notification.permission)throw se.create(\"permission-blocked\");return[2,Ae(this.firebaseDependencies,e,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),[2,qe(this.firebaseDependencies,e)]}})})},e.prototype.requestPermission=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(t){switch(t.label){case 0:return\"granted\"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(\"granted\"===(e=t.sent()))return[2];throw\"denied\"===e?se.create(\"permission-blocked\"):se.create(\"permission-default\")}})})},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw se.create(\"use-vapid-key-after-get-token\");if(\"string\"!=typeof e||0===e.length)throw se.create(\"invalid-vapid-key\");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw se.create(\"invalid-sw-registration\");if(this.swRegistration)throw se.create(\"use-sw-after-get-token\");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=\"function\"==typeof e?e:e.next,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw se.create(\"only-available-in-sw\")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.getServiceWorkerRegistration=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,t;return Object(s.__generator)(this,function(n){switch(n.label){case 0:if(this.swRegistration)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register(\"/firebase-messaging-sw.js\",{scope:\"/firebase-cloud-messaging-push-scope\"})];case 2:return e.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw t=n.sent(),se.create(\"failed-service-worker-registration\",{browserErrorMessage:t.message});case 4:return[2,this.swRegistration]}})})},e.prototype.messageEventListener=function(e){var t;return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(s.__generator)(this,function(a){switch(a.label){case 0:return(null===(t=e.data)||void 0===t?void 0:t.firebaseMessaging)?(n=e.data.firebaseMessaging,r=n.type,i=n.payload,this.onMessageCallback&&r===Ne.PUSH_RECEIVED&&this.onMessageCallback(i),Le(o=i.data)&&\"1\"===o[\"google.c.a.e\"]?[4,this.logEvent(r,o)]:[3,2]):[2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.logEvent=function(e,t){return Object(s.__awaiter)(this,void 0,void 0,function(){var n;return Object(s.__generator)(this,function(r){switch(r.label){case 0:return n=function(e){switch(e){case Ne.NOTIFICATION_CLICKED:return\"notification_open\";case Ne.PUSH_RECEIVED:return\"notification_foreground\";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t[Ce],message_name:t[\"google.c.a.c_l\"],message_time:t[\"google.c.a.ts\"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();var Fe=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener(\"push\",function(e){e.waitUntil(t.onPush(e))}),self.addEventListener(\"pushsubscriptionchange\",function(e){e.waitUntil(t.onSubChange(e))}),self.addEventListener(\"notificationclick\",function(e){e.waitUntil(t.onNotificationClick(e))})}return Object.defineProperty(e.prototype,\"app\",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(!e||\"function\"!=typeof e)throw se.create(\"invalid-bg-handler\");this.bgMessageHandler=e},e.prototype.getToken=function(){var e,t;return Object(s.__awaiter)(this,void 0,void 0,function(){var n;return Object(s.__generator)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,ye(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:ke,r.label=2;case 2:return[2,Ae(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return qe(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw se.create(\"only-available-in-window\")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw se.create(\"use-vapid-key-after-get-token\");if(\"string\"!=typeof e||0===e.length)throw se.create(\"invalid-vapid-key\");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw se.create(\"only-available-in-window\")},e.prototype.onMessage=function(){throw se.create(\"only-available-in-window\")},e.prototype.onTokenRefresh=function(){throw se.create(\"only-available-in-window\")},e.prototype.onPush=function(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e))?[4,$e()]:[2];case 1:return function(e){return e.some(function(e){return\"visible\"===e.visibilityState&&!e.url.startsWith(\"chrome-extension://\")})}(n=i.sent())?[2,Ue(n,t)]:(r=function(e){var t;if(!e||\"object\"!=typeof e.notification)return;var n=Object(s.__assign)({},e.notification);return n.data=Object(s.__assign)(Object(s.__assign)({},e.notification.data),((t={})[Ie]=e,t)),n}(t))?[4,Ge(r)]:[3,3];case 2:return i.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2]}})})},e.prototype.onSubChange=function(e){var t,n;return Object(s.__awaiter)(this,void 0,void 0,function(){var r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,qe(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,ye(this.firebaseDependencies)];case 3:return r=i.sent(),[4,qe(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Ae(this.firebaseDependencies,self.registration,null!==(n=null===(t=null==r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:ke)];case 5:return i.sent(),[2]}})})},e.prototype.onNotificationClick=function(e){var t,n;return Object(s.__awaiter)(this,void 0,void 0,function(){var r,i,o,a;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[Ie])?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(i=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return Le(e.data)?self.location.origin:null}(r))?[4,He(i)]:[2]):[2];case 1:return(o=s.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return o=s.sent(),[4,(c=3e3,new Promise(function(e){setTimeout(e,c)}))];case 3:return s.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=s.sent(),s.label=6;case 6:return o?(a=Je(Ne.NOTIFICATION_CLICKED,r),[2,o.postMessage(a)]):[2]}var c})})},e}();function He(e){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a,c;return Object(s.__generator)(this,function(u){switch(u.label){case 0:return t=new URL(e,self.location.href).href,[4,$e()];case 1:n=u.sent();try{for(r=Object(s.__values)(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).href===t)return[2,o]}catch(l){a={error:l}}finally{try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(a)throw a.error}}return[2,null]}})})}function Ue(e,t){var n,r,i=Je(Ne.PUSH_RECEIVED,t);try{for(var o=Object(s.__values)(e),a=o.next();!a.done;a=o.next()){a.value.postMessage(i)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function $e(){return self.clients.matchAll({type:\"window\",includeUncontrolled:!0})}function Je(e,t){return{firebaseMessaging:{type:e,payload:t}}}function Ge(e){var t,n=null!==(t=e.title)&&void 0!==t?t:\"\",r=e.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn(\"This browser only supports \"+i+\" actions. The remaining actions will not be displayed.\"),self.registration.showNotification(n,e)}var ze={isSupported:Qe};function Qe(){return self&&\"ServiceWorkerGlobalScope\"in self?\"indexedDB\"in self&&null!==indexedDB&&\"PushManager\"in self&&\"Notification\"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty(\"showNotification\")&&PushSubscription.prototype.hasOwnProperty(\"getKey\"):\"indexedDB\"in window&&null!==indexedDB&&navigator.cookieEnabled&&\"serviceWorker\"in navigator&&\"PushManager\"in window&&\"Notification\"in window&&\"fetch\"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty(\"showNotification\")&&PushSubscription.prototype.hasOwnProperty(\"getKey\")}o.a.INTERNAL.registerComponent(new a.Component(\"messaging\",function(e){var t=e.getProvider(\"app\").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw ce(\"App Configuration Object\");if(!e.name)throw ce(\"App Name\");var r=e.options;try{for(var i=Object(s.__values)([\"projectId\",\"apiKey\",\"appId\",\"messagingSenderId\"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw ce(a)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider(\"installations\").getImmediate(),analyticsProvider:e.getProvider(\"analytics-internal\")};if(!Qe())throw se.create(\"unsupported-browser\");return self&&\"ServiceWorkerGlobalScope\"in self?new Fe(n):new Ve(n)},\"PUBLIC\").setServiceProps(ze))},555:function(e,t,n){n(15),n(1),n(32),n(51),n(3),function(e){\"use strict\";function t(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function n(e,n,r){var i,o=new Promise(function(o,a){t(i=e[n].apply(e,r)).then(o,a)});return o.request=i,o}function r(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function i(e,t,r,i){i.forEach(function(i){i in r.prototype&&(e.prototype[i]=function(){return n(this[t],i,arguments)})})}function o(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function a(e,t,r,i){i.forEach(function(i){i in r.prototype&&(e.prototype[i]=function(){return e=this[t],(r=n(e,i,arguments)).then(function(e){if(e)return new c(e,r.request)});var e,r})})}function s(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function u(e){this._store=e}function l(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function f(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new l(n)}function d(e){this._db=e}r(s,\"_index\",[\"name\",\"keyPath\",\"multiEntry\",\"unique\"]),i(s,\"_index\",IDBIndex,[\"get\",\"getKey\",\"getAll\",\"getAllKeys\",\"count\"]),a(s,\"_index\",IDBIndex,[\"openCursor\",\"openKeyCursor\"]),r(c,\"_cursor\",[\"direction\",\"key\",\"primaryKey\",\"value\"]),i(c,\"_cursor\",IDBCursor,[\"update\",\"delete\"]),[\"advance\",\"continue\",\"continuePrimaryKey\"].forEach(function(e){e in IDBCursor.prototype&&(c.prototype[e]=function(){var n=this,r=arguments;return Promise.resolve().then(function(){return n._cursor[e].apply(n._cursor,r),t(n._request).then(function(e){if(e)return new c(e,n._request)})})})}),u.prototype.createIndex=function(){return new s(this._store.createIndex.apply(this._store,arguments))},u.prototype.index=function(){return new s(this._store.index.apply(this._store,arguments))},r(u,\"_store\",[\"name\",\"keyPath\",\"indexNames\",\"autoIncrement\"]),i(u,\"_store\",IDBObjectStore,[\"put\",\"add\",\"delete\",\"clear\",\"get\",\"getAll\",\"getKey\",\"getAllKeys\",\"count\"]),a(u,\"_store\",IDBObjectStore,[\"openCursor\",\"openKeyCursor\"]),o(u,\"_store\",IDBObjectStore,[\"deleteIndex\"]),l.prototype.objectStore=function(){return new u(this._tx.objectStore.apply(this._tx,arguments))},r(l,\"_tx\",[\"objectStoreNames\",\"mode\"]),o(l,\"_tx\",IDBTransaction,[\"abort\"]),f.prototype.createObjectStore=function(){return new u(this._db.createObjectStore.apply(this._db,arguments))},r(f,\"_db\",[\"name\",\"version\",\"objectStoreNames\"]),o(f,\"_db\",IDBDatabase,[\"deleteObjectStore\",\"close\"]),d.prototype.transaction=function(){return new l(this._db.transaction.apply(this._db,arguments))},r(d,\"_db\",[\"name\",\"version\",\"objectStoreNames\"]),o(d,\"_db\",IDBDatabase,[\"close\"]),[\"openCursor\",\"openKeyCursor\"].forEach(function(e){[u,s].forEach(function(t){e in t.prototype&&(t.prototype[e.replace(\"open\",\"iterate\")]=function(){var t,n=(t=arguments,Array.prototype.slice.call(t)),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[s,u].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,r){var i=n(indexedDB,\"open\",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){r&&r(new f(o.result,e.oldVersion,o.transaction))}),i.then(function(e){return new d(e)})},e.deleteDb=function(e){return n(indexedDB,\"deleteDatabase\",[e])},Object.defineProperty(e,\"__esModule\",{value:!0})}(t)}}]);","extractedComments":[]}