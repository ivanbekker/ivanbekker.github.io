{"map":"{\"version\":3,\"sources\":[\"/Users/ivanbekker/Projects/corezoid_site/src/templates/Sender/Sender.js\",\"/Users/ivanbekker/Projects/corezoid_site/src/pages/certification/junior.js\",\"/Users/ivanbekker/Projects/corezoid_site/src/components/Layout/index.js\"],\"names\":[\"Sender\",\"i\",\"mesId\",\"Utils\",\"getMes\",\"this\",\"context\",\"componentDidMount\",\"_this\",\"window\",\"UtilsApi\",\"isAuth\",\"res\",\"login\",\"localStorage\",\"setItem\",\"setTimeout\",\"initSender\",\"props\",\"data\",\"location\",\"href\",\"host\",\"user\",\"createWidget\",\"url\",\"companyId\",\"userSend\",\"id\",\"user_id\",\"name\",\"nick\",\"lang\",\"getItem\",\"frame\",\"document\",\"createElement\",\"src\",\"encodeURI\",\"JSON\",\"stringify\",\"setAttribute\",\"widget\",\"innerHTML\",\"appendChild\",\"render\",\"_this2\",\"title\",\"react_default\",\"a\",\"className\",\"ref\",\"el\",\"PureComponent\",\"key\",\"withIntl\",\"Layout\",\"templates_Sender_Sender\",\"_Layout__WEBPACK_IMPORTED_MODULE_0__\",\"__webpack_require__\",\"d\",\"__webpack_exports__\"],\"mappings\":\"wKAoFeA,0LA1EbC,EAAA,SAAEC,GACA,OAAOC,EAAAA,EAAMC,OAAOC,KAAKC,QAAlBH,CAA2BD,MAGpCK,kBAAA,WAAoB,IAAAC,EAAAH,KACI,oBAAXI,QACTC,EAAAA,EAASC,OAAO,SAACC,GACf,GAAIA,EAAIC,MACNC,aAAaC,QAAQ,YAAaH,EAAIC,OACtCG,WAAW,WACTR,EAAKS,WAAWT,EAAKU,MAAMC,KAAMP,IAChC,QACE,CAELQ,SAASC,KAAUC,gEAA0CF,SAASC,WAM9EJ,WAAA,SAAWE,EAAMI,GAEflB,KAAKmB,aADO,8CACWL,EAAMI,MAG/BC,aAAA,SAAaC,EAAKN,EAAMI,GAAM,IACpBG,EAAcP,EAAdO,UACFC,EAAW,CACfC,GAAIL,EAAKM,QACTC,KAAMP,EAAKQ,KACXlB,MAAOU,EAAKV,OAORmB,EAAOlB,aAAamB,QAAQ,aAAe,KAC3CC,EAAQC,SAASC,cAAc,UACrCF,EAAMG,IAAMC,UAAab,EAAH,aAAmBU,SAASf,SAASE,KAArC,SAAkDU,EAAlD,iDACJN,EADI,cACmBa,KAAKC,UAAUb,IACxDO,EAAMO,aAAa,QAAS,kBAC5BP,EAAMO,aAAa,cAAe,GAClCpC,KAAKqC,OAAOC,UAAY,GACxBtC,KAAKqC,OAAOE,YAAYV,MAI1BW,OAAA,WAAS,IAAAC,EAAAzC,KACA0C,EAAS1C,KAAKa,MAAMC,KAApB4B,MACP,OACEC,EAAAC,EAAAb,cAAA,MAAA,CAAKc,UAAU,UACbF,EAAAC,EAAAb,cAAA,MAAA,CAAKc,UAAU,mBACbF,EAAAC,EAAAb,cAAA,MAAA,CAAKc,UAAU,kBACbF,EAAAC,EAAAb,cAAA,MAAA,CAAKc,UAAU,yBACZH,KAIPC,EAAAC,EAAAb,cAAA,MAAA,CACEc,UAAU,iBACVC,IAAK,SAACC,GACJN,EAAKJ,OAASU,UAjELC,EAAAA,eCFflC,EAAO,CACXmC,IAAK,6BACL5B,UAAW,aACXqB,MAAO,wBASMQ,EAAAA,QAAAA,OAAAA,EAAAA,EAAAA,CANA,SAACrC,GAAD,OACb8B,EAAAC,EAAAb,cAACoB,EAAA,EAAWtC,EACV8B,EAAAC,EAAAb,cAACqB,EAAD,CAAYtC,KAAMA,yCCbtB,IAAAuC,EAAAC,EAAA,KAAAA,EAAAC,EAAAC,EAAA,IAAA,WAAA,OAAAH,EAAA\",\"sourcesContent\":[\"import React, {PureComponent} from 'react';\\nimport PropTypes from 'prop-types';\\nimport Utils from '../../utils/utils';\\nimport './Sender.scss';\\nimport UtilsApi from '../../utils/api';\\n\\n\\nclass Sender extends PureComponent {\\n\\n  // Ф-ция локализации\\n  i(mesId) {\\n    return Utils.getMes(this.context)(mesId);\\n  }\\n\\n  componentDidMount() {\\n    if (typeof window !== 'undefined') {\\n      UtilsApi.isAuth((res) => {\\n        if (res.login) {\\n          localStorage.setItem('userEmail', res.login);\\n          setTimeout(() => {\\n            this.initSender(this.props.data, res);\\n          }, 10);\\n        } else {\\n          const host = process.env.GATSBY_HOST;\\n          location.href = `${host}/auth2/single_account?redirect_uri=${location.href}`;\\n        }\\n      });\\n    }\\n  }\\n\\n  initSender(data, user) {\\n    const url = 'https://widget.sender.mobi/build/popup.html';\\n    this.createWidget(url, data, user);\\n  }\\n\\n  createWidget(url, data, user) {\\n    const { companyId } = data;\\n    const userSend = {\\n      id: user.user_id,\\n      name: user.nick,\\n      login: user.login\\n    };\\n\\n    // test for pre\\n    // const testUrl = 'https://widget.pre.sender.mobi/build/popup.html';\\n    // const testCompanyId = 'i767703072';\\n\\n    const lang = localStorage.getItem('language') || 'en';\\n    const frame = document.createElement('iframe');\\n    frame.src = encodeURI(`${url}?location=${document.location.host}&lang=${lang}&&cleanHistory=false&embedMode=true`\\n      + `&companyId=${companyId}&extraData=${JSON.stringify(userSend)}`);\\n    frame.setAttribute('class', 'sender__iframe');\\n    frame.setAttribute('frameborder', 0);\\n    this.widget.innerHTML = '';\\n    this.widget.appendChild(frame);\\n  }\\n\\n\\n  render() {\\n    const {title} = this.props.data;\\n    return (\\n      <div className=\\\"sender\\\">\\n        <div className=\\\"sender__wrapper\\\">\\n          <div className=\\\"sender__header\\\">\\n            <div className=\\\"sender__header__title\\\">\\n              {title}\\n            </div>\\n          </div>\\n        </div>\\n        <div\\n          className=\\\"sender__widget\\\"\\n          ref={(el) => {\\n            this.widget = el;\\n          }}\\n        />\\n      </div>\\n    );\\n  }\\n}\\n\\nSender.propTypes = {\\n  data: PropTypes.object.isRequired\\n};\\n\\nexport default Sender;\\n\",\"import React from 'react';\\nimport Layout from '../../components/Layout';\\nimport { withIntl } from '../../i18n';\\nimport SenderPage from '../../templates/Sender';\\n\\nconst data = {\\n  key: '2VLcsjTFbwTEHN3vAPXaXVvhUU',\\n  companyId: 'i441268392',\\n  title: 'Junior certification'\\n};\\n\\nconst Junior = (props) => (\\n  <Layout {...props}>\\n    <SenderPage data={data}/>\\n  </Layout>\\n);\\n\\nexport default withIntl(Junior);\\n\\n\",\"export {default} from './Layout';\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{333:function(e,t,n){\"use strict\";n.r(t);var i=n(0),a=n.n(i),r=n(343),o=n(339),c=n(342),s=(n(1138),n(362));var d=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.i=function(e){return c.a.getMes(this.context)(e)},r.componentDidMount=function(){var e=this;\"undefined\"!=typeof window&&s.a.isAuth(function(t){if(t.login)localStorage.setItem(\"userEmail\",t.login),setTimeout(function(){e.initSender(e.props.data,t)},10);else{location.href=\"https://admin.corezoid.com/auth2/single_account?redirect_uri=\"+location.href}})},r.initSender=function(e,t){this.createWidget(\"https://widget.sender.mobi/build/popup.html\",e,t)},r.createWidget=function(e,t,n){var i=t.companyId,a={id:n.user_id,name:n.nick,login:n.login},r=localStorage.getItem(\"language\")||\"en\",o=document.createElement(\"iframe\");o.src=encodeURI(e+\"?location=\"+document.location.host+\"&lang=\"+r+\"&&cleanHistory=false&embedMode=true&companyId=\"+i+\"&extraData=\"+JSON.stringify(a)),o.setAttribute(\"class\",\"sender__iframe\"),o.setAttribute(\"frameborder\",0),this.widget.innerHTML=\"\",this.widget.appendChild(o)},r.render=function(){var e=this,t=this.props.data.title;return a.a.createElement(\"div\",{className:\"sender\"},a.a.createElement(\"div\",{className:\"sender__wrapper\"},a.a.createElement(\"div\",{className:\"sender__header\"},a.a.createElement(\"div\",{className:\"sender__header__title\"},t))),a.a.createElement(\"div\",{className:\"sender__widget\",ref:function(t){e.widget=t}}))},i}(i.PureComponent),u={key:\"2VLcsjTFbwTEHN3vAPXaXVvhUU\",companyId:\"i441268392\",title:\"Junior certification\"};t.default=Object(o.b)(function(e){return a.a.createElement(r.a,e,a.a.createElement(d,{data:u}))})},343:function(e,t,n){\"use strict\";var i=n(344);n.d(t,\"a\",function(){return i.a})}}]);","extractedComments":[]}