import React, {Component} from 'react';
import {storiesOf} from '@storybook/react';
import {boolean, select, text, object} from '@storybook/addon-knobs/react';
import SendForm from '../src/components/SendForm';
import infoDecorator from '../.storybook/customDecorators/infoDecorator';
import themeDecorator from '../.storybook/customDecorators/themeDecorator';

const stories = storiesOf('SendForm', module);
infoDecorator(stories);
themeDecorator(stories);

stories
  .add('default',
    () => (
      <SendForm
        id="sendForm"
        type={select('Type', ['chat', 'comment'], 'chat')}
        maxFileSize={2 * 1024 * 1024}
        visibility={select('Visibility', ['visible', 'disabled', 'hidden'], 'visible')}
        label={text('Label', 'Label text')}
        placeholder={text('Placeholder', 'Enter your message')}
        sendButtonLabel={text('Send button label', 'Send')}
        cancelButtonLabel={text('Cancel button label', 'Cancel')}
        options={object('options')}
        error={boolean('Error', false)}
        onChange={(e) => {
          // console.log(e);
        }}
      />
    )
  );


class TestSendForm extends Component {
  constructor(props) {
    super(props);
    this.state = {
      value: {
        message: '',
        files: [{
          id: '1',
          value: 'https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png',
          label: 'image',
          type: 'image',
          size: '10'
        }],
        users: []
      }
    };
  }

  handleChange({value}) {
    this.setState({value});
  }

  render() {
    return (
      <div className="App" style={{marginTop: 200}}>
        <SendForm
          id="sendForm"
          type="comment"
          value={this.state.value}
          visibility="visible"
          label="Label text"
          placeholder="Enter your message"
          cancelButtonLabel="Cancel"
          maxFileSize={2}
          options={{
            smiles: {},
            sign: true,
            rating: true,
            files: {multiple: true, preview: true, accept: 'image/*,text/*,application/*'},
            users: [
              {id: '1', value: 'Aleksandr Bazyk', avatar: 'https://www.corezoid.com/avatars/4.jpg'},
              {id: '2', value: 'Yegor K', avatar: null},
              {id: '3', value: 'Pavel Chayka', avatar: null},
              {id: '4', value: 'nick', avatar: null},
              {id: '5', value: 'nick', avatar: null},
              {id: '6', value: 'nick', avatar: null},
              {id: '7', value: 'nick', avatar: null},
              {id: '8', value: 'nick', avatar: null},
              {id: '9', value: 'nick', avatar: null},
              {id: '10', value: 'nick', avatar: null},
            ]
          }}
          onChange={(e) => ::this.handleChange(e)}
          onSubmit={(e) => {
            console.log(e);
            this.setState({
              value: {
                message: '',
                files: [],
                sign: false
              }
            });
          }}
          onCancel={(e) => {
            console.log('cancel', e);
          }}
        />
      </div>
    );
  }
}

stories
  .add('test send form',
    () => (<TestSendForm/>)
  );
